var Vo=Object.defineProperty,Fo=Object.defineProperties;var Eo=Object.getOwnPropertyDescriptors;var it=Object.getOwnPropertySymbols;var kn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable;var Pn=(e,t,n)=>t in e?Vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))kn.call(t,n)&&Pn(e,n,t[n]);if(it)for(var n of it(t))hn.call(t,n)&&Pn(e,n,t[n]);return e},E=(e,t)=>Fo(e,Eo(t));var pe=(e,t)=>{var n={};for(var o in e)kn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&it)for(var o of it(e))t.indexOf(o)<0&&hn.call(e,o)&&(n[o]=e[o]);return n};import Mo from"axios";import{get as Tn,set as Do}from"lodash";var Vt=class{constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},In={},Wo={};function _(e){let t=Tn(In,e);if(!t){let n=Tn(Wo,e);t=new Vt({name:e,logLevel:n}),Do(In,e,t)}return t}import{PublicKey as Zu}from"@solana/web3.js";import $u from"bn.js";import Jr from"big.js";import Lu from"bn.js";import ie from"bn.js";var Me=9e15,xe=1e9,Ft="0123456789abcdef",at="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ut="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Et={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Me,maxE:Me,crypto:!1},Kn,Ae,N=!0,lt="[DecimalError] ",Be=lt+"Invalid argument: ",Cn=lt+"Precision limit exceeded",Rn=lt+"crypto unavailable",Ln="[object Decimal]",$=Math.floor,Q=Math.pow,qo=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Uo=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Go=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,On=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,me=1e7,R=7,Xo=9007199254740991,zo=at.length-1,Dt=ut.length-1,A={toStringTag:Ln};A.absoluteValue=A.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),C(e)};A.ceil=function(){return C(new this.constructor(this),this.e+1,2)};A.clampedTo=A.clamp=function(e,t){var n,o=this,r=o.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Be+t);return n=o.cmp(e),n<0?e:o.cmp(t)>0?t:new r(o)};A.comparedTo=A.cmp=function(e){var t,n,o,r,i=this,s=i.d,a=(e=new i.constructor(e)).d,u=i.s,l=e.s;if(!s||!a)return!u||!l?NaN:u!==l?u:s===a?0:!s^u<0?1:-1;if(!s[0]||!a[0])return s[0]?u:a[0]?-l:0;if(u!==l)return u;if(i.e!==e.e)return i.e>e.e^u<0?1:-1;for(o=s.length,r=a.length,t=0,n=o<r?o:r;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return o===r?0:o>r^u<0?1:-1};A.cosine=A.cos=function(){var e,t,n=this,o=n.constructor;return n.d?n.d[0]?(e=o.precision,t=o.rounding,o.precision=e+Math.max(n.e,n.sd())+R,o.rounding=1,n=Qo(o,Vn(o,n)),o.precision=e,o.rounding=t,C(Ae==2||Ae==3?n.neg():n,e,t,!0)):new o(1):new o(NaN)};A.cubeRoot=A.cbrt=function(){var e,t,n,o,r,i,s,a,u,l,m=this,d=m.constructor;if(!m.isFinite()||m.isZero())return new d(m);for(N=!1,i=m.s*Q(m.s*m,1/3),!i||Math.abs(i)==1/0?(n=Z(m.d),e=m.e,(i=(e-n.length+1)%3)&&(n+=i==1||i==-2?"0":"00"),i=Q(n,1/3),e=$((e+1)/3)-(e%3==(e<0?-1:2)),i==1/0?n="5e"+e:(n=i.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),o=new d(n),o.s=m.s):o=new d(i.toString()),s=(e=d.precision)+3;;)if(a=o,u=a.times(a).times(a),l=u.plus(m),o=W(l.plus(m).times(a),l.plus(u),s+2,1),Z(a.d).slice(0,s)===(n=Z(o.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(C(a,e+1,0),a.times(a).times(a).eq(m))){o=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(C(o,e+1,1),t=!o.times(o).times(o).eq(m));break}return N=!0,C(o,e,d.rounding,t)};A.decimalPlaces=A.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-$(this.e/R))*R,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};A.dividedBy=A.div=function(e){return W(this,new this.constructor(e))};A.dividedToIntegerBy=A.divToInt=function(e){var t=this,n=t.constructor;return C(W(t,new n(e),0,1,1),n.precision,n.rounding)};A.equals=A.eq=function(e){return this.cmp(e)===0};A.floor=function(){return C(new this.constructor(this),this.e+1,3)};A.greaterThan=A.gt=function(e){return this.cmp(e)>0};A.greaterThanOrEqualTo=A.gte=function(e){var t=this.cmp(e);return t==1||t===0};A.hyperbolicCosine=A.cosh=function(){var e,t,n,o,r,i=this,s=i.constructor,a=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return a;n=s.precision,o=s.rounding,s.precision=n+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<32?(e=Math.ceil(r/3),t=(1/dt(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),i=ve(s,1,i.times(t),new s(1),!0);for(var u,l=e,m=new s(8);l--;)u=i.times(i),i=a.minus(u.times(m.minus(u.times(m))));return C(i,s.precision=n,s.rounding=o,!0)};A.hyperbolicSine=A.sinh=function(){var e,t,n,o,r=this,i=r.constructor;if(!r.isFinite()||r.isZero())return new i(r);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(r.e,r.sd())+4,i.rounding=1,o=r.d.length,o<3)r=ve(i,2,r,r,!0);else{e=1.4*Math.sqrt(o),e=e>16?16:e|0,r=r.times(1/dt(5,e)),r=ve(i,2,r,r,!0);for(var s,a=new i(5),u=new i(16),l=new i(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(u.times(s).plus(l))))}return i.precision=t,i.rounding=n,C(r,t,n,!0)};A.hyperbolicTangent=A.tanh=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+7,o.rounding=1,W(n.sinh(),n.cosh(),o.precision=e,o.rounding=t)):new o(n.s)};A.inverseCosine=A.acos=function(){var e,t=this,n=t.constructor,o=t.abs().cmp(1),r=n.precision,i=n.rounding;return o!==-1?o===0?t.isNeg()?le(n,r,i):new n(0):new n(NaN):t.isZero()?le(n,r+4,i).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=le(n,r+4,i).times(.5),n.precision=r,n.rounding=i,e.minus(t))};A.inverseHyperbolicCosine=A.acosh=function(){var e,t,n=this,o=n.constructor;return n.lte(1)?new o(n.eq(1)?0:NaN):n.isFinite()?(e=o.precision,t=o.rounding,o.precision=e+Math.max(Math.abs(n.e),n.sd())+4,o.rounding=1,N=!1,n=n.times(n).minus(1).sqrt().plus(n),N=!0,o.precision=e,o.rounding=t,n.ln()):new o(n)};A.inverseHyperbolicSine=A.asinh=function(){var e,t,n=this,o=n.constructor;return!n.isFinite()||n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,o.rounding=1,N=!1,n=n.times(n).plus(1).sqrt().plus(n),N=!0,o.precision=e,o.rounding=t,n.ln())};A.inverseHyperbolicTangent=A.atanh=function(){var e,t,n,o,r=this,i=r.constructor;return r.isFinite()?r.e>=0?new i(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=i.precision,t=i.rounding,o=r.sd(),Math.max(o,e)<2*-r.e-1?C(new i(r),e,t,!0):(i.precision=n=o-r.e,r=W(r.plus(1),new i(1).minus(r),n+e,1),i.precision=e+4,i.rounding=1,r=r.ln(),i.precision=e,i.rounding=t,r.times(.5))):new i(NaN)};A.inverseSine=A.asin=function(){var e,t,n,o,r=this,i=r.constructor;return r.isZero()?new i(r):(t=r.abs().cmp(1),n=i.precision,o=i.rounding,t!==-1?t===0?(e=le(i,n+4,o).times(.5),e.s=r.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,r=r.div(new i(1).minus(r.times(r)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=o,r.times(2)))};A.inverseTangent=A.atan=function(){var e,t,n,o,r,i,s,a,u,l=this,m=l.constructor,d=m.precision,p=m.rounding;if(l.isFinite()){if(l.isZero())return new m(l);if(l.abs().eq(1)&&d+4<=Dt)return s=le(m,d+4,p).times(.25),s.s=l.s,s}else{if(!l.s)return new m(NaN);if(d+4<=Dt)return s=le(m,d+4,p).times(.5),s.s=l.s,s}for(m.precision=a=d+10,m.rounding=1,n=Math.min(28,a/R+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(N=!1,t=Math.ceil(a/R),o=1,u=l.times(l),s=new m(l),r=l;e!==-1;)if(r=r.times(u),i=s.minus(r.div(o+=2)),r=r.times(u),s=i.plus(r.div(o+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===i.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),N=!0,C(s,m.precision=d,m.rounding=p,!0)};A.isFinite=function(){return!!this.d};A.isInteger=A.isInt=function(){return!!this.d&&$(this.e/R)>this.d.length-2};A.isNaN=function(){return!this.s};A.isNegative=A.isNeg=function(){return this.s<0};A.isPositive=A.isPos=function(){return this.s>0};A.isZero=function(){return!!this.d&&this.d[0]===0};A.lessThan=A.lt=function(e){return this.cmp(e)<0};A.lessThanOrEqualTo=A.lte=function(e){return this.cmp(e)<1};A.logarithm=A.log=function(e){var t,n,o,r,i,s,a,u,l=this,m=l.constructor,d=m.precision,p=m.rounding,g=5;if(e==null)e=new m(10),t=!0;else{if(e=new m(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new m(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new m(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(r=n[0];r%10===0;)r/=10;i=r!==1}if(N=!1,a=d+g,s=Ie(l,a),o=t?ct(m,a+10):Ie(e,a),u=W(s,o,a,1),Ue(u.d,r=d,p))do if(a+=10,s=Ie(l,a),o=t?ct(m,a+10):Ie(e,a),u=W(s,o,a,1),!i){+Z(u.d).slice(r+1,r+15)+1==1e14&&(u=C(u,d+1,0));break}while(Ue(u.d,r+=10,p));return N=!0,C(u,d,p)};A.minus=A.sub=function(e){var t,n,o,r,i,s,a,u,l,m,d,p,g=this,I=g.constructor;if(e=new I(e),!g.d||!e.d)return!g.s||!e.s?e=new I(NaN):g.d?e.s=-e.s:e=new I(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(l=g.d,p=e.d,a=I.precision,u=I.rounding,!l[0]||!p[0]){if(p[0])e.s=-e.s;else if(l[0])e=new I(g);else return new I(u===3?-0:0);return N?C(e,a,u):e}if(n=$(e.e/R),m=$(g.e/R),l=l.slice(),i=m-n,i){for(d=i<0,d?(t=l,i=-i,s=p.length):(t=p,n=m,s=l.length),o=Math.max(Math.ceil(a/R),s)+2,i>o&&(i=o,t.length=1),t.reverse(),o=i;o--;)t.push(0);t.reverse()}else{for(o=l.length,s=p.length,d=o<s,d&&(s=o),o=0;o<s;o++)if(l[o]!=p[o]){d=l[o]<p[o];break}i=0}for(d&&(t=l,l=p,p=t,e.s=-e.s),s=l.length,o=p.length-s;o>0;--o)l[s++]=0;for(o=p.length;o>i;){if(l[--o]<p[o]){for(r=o;r&&l[--r]===0;)l[r]=me-1;--l[r],l[o]+=me}l[o]-=p[o]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=mt(l,n),N?C(e,a,u):e):new I(u===3?-0:0)};A.modulo=A.mod=function(e){var t,n=this,o=n.constructor;return e=new o(e),!n.d||!e.s||e.d&&!e.d[0]?new o(NaN):!e.d||n.d&&!n.d[0]?C(new o(n),o.precision,o.rounding):(N=!1,o.modulo==9?(t=W(n,e.abs(),0,3,1),t.s*=e.s):t=W(n,e,0,o.modulo,1),t=t.times(e),N=!0,n.minus(t))};A.naturalExponential=A.exp=function(){return Wt(this)};A.naturalLogarithm=A.ln=function(){return Ie(this)};A.negated=A.neg=function(){var e=new this.constructor(this);return e.s=-e.s,C(e)};A.plus=A.add=function(e){var t,n,o,r,i,s,a,u,l,m,d=this,p=d.constructor;if(e=new p(e),!d.d||!e.d)return!d.s||!e.s?e=new p(NaN):d.d||(e=new p(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(l=d.d,m=e.d,a=p.precision,u=p.rounding,!l[0]||!m[0])return m[0]||(e=new p(d)),N?C(e,a,u):e;if(i=$(d.e/R),o=$(e.e/R),l=l.slice(),r=i-o,r){for(r<0?(n=l,r=-r,s=m.length):(n=m,o=i,s=l.length),i=Math.ceil(a/R),s=i>s?i+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=l.length,r=m.length,s-r<0&&(r=s,n=m,m=l,l=n),t=0;r;)t=(l[--r]=l[r]+m[r]+t)/me|0,l[r]%=me;for(t&&(l.unshift(t),++o),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=mt(l,o),N?C(e,a,u):e};A.precision=A.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Be+e);return n.d?(t=Nn(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};A.round=function(){var e=this,t=e.constructor;return C(new t(e),e.e+1,t.rounding)};A.sine=A.sin=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+Math.max(n.e,n.sd())+R,o.rounding=1,n=jo(o,Vn(o,n)),o.precision=e,o.rounding=t,C(Ae>2?n.neg():n,e,t,!0)):new o(NaN)};A.squareRoot=A.sqrt=function(){var e,t,n,o,r,i,s=this,a=s.d,u=s.e,l=s.s,m=s.constructor;if(l!==1||!a||!a[0])return new m(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);for(N=!1,l=Math.sqrt(+s),l==0||l==1/0?(t=Z(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=$((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),o=new m(t)):o=new m(l.toString()),n=(u=m.precision)+3;;)if(i=o,o=i.plus(W(s,i,n+2,1)).times(.5),Z(i.d).slice(0,n)===(t=Z(o.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(C(i,u+1,0),i.times(i).eq(s))){o=i;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(C(o,u+1,1),e=!o.times(o).eq(s));break}return N=!0,C(o,u,m.rounding,e)};A.tangent=A.tan=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+10,o.rounding=1,n=n.sin(),n.s=1,n=W(n,new o(1).minus(n.times(n)).sqrt(),e+10,0),o.precision=e,o.rounding=t,C(Ae==2||Ae==4?n.neg():n,e,t,!0)):new o(NaN)};A.times=A.mul=function(e){var t,n,o,r,i,s,a,u,l,m=this,d=m.constructor,p=m.d,g=(e=new d(e)).d;if(e.s*=m.s,!p||!p[0]||!g||!g[0])return new d(!e.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?e.s/0:e.s*0);for(n=$(m.e/R)+$(e.e/R),u=p.length,l=g.length,u<l&&(i=p,p=g,g=i,s=u,u=l,l=s),i=[],s=u+l,o=s;o--;)i.push(0);for(o=l;--o>=0;){for(t=0,r=u+o;r>o;)a=i[r]+g[o]*p[r-o-1]+t,i[r--]=a%me|0,t=a/me|0;i[r]=(i[r]+t)%me|0}for(;!i[--s];)i.pop();return t?++n:i.shift(),e.d=i,e.e=mt(i,n),N?C(e,d.precision,d.rounding):e};A.toBinary=function(e,t){return Ut(this,2,e,t)};A.toDecimalPlaces=A.toDP=function(e,t){var n=this,o=n.constructor;return n=new o(n),e===void 0?n:(re(e,0,xe),t===void 0?t=o.rounding:re(t,0,8),C(n,e+n.e+1,t))};A.toExponential=function(e,t){var n,o=this,r=o.constructor;return e===void 0?n=fe(o,!0):(re(e,0,xe),t===void 0?t=r.rounding:re(t,0,8),o=C(new r(o),e+1,t),n=fe(o,!0,e+1)),o.isNeg()&&!o.isZero()?"-"+n:n};A.toFixed=function(e,t){var n,o,r=this,i=r.constructor;return e===void 0?n=fe(r):(re(e,0,xe),t===void 0?t=i.rounding:re(t,0,8),o=C(new i(r),e+r.e+1,t),n=fe(o,!1,e+o.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};A.toFraction=function(e){var t,n,o,r,i,s,a,u,l,m,d,p,g=this,I=g.d,P=g.constructor;if(!I)return new P(g);if(l=n=new P(1),o=u=new P(0),t=new P(o),i=t.e=Nn(I)-g.e-1,s=i%R,t.d[0]=Q(10,s<0?R+s:s),e==null)e=i>0?t:l;else{if(a=new P(e),!a.isInt()||a.lt(l))throw Error(Be+a);e=a.gt(t)?i>0?t:l:a}for(N=!1,a=new P(Z(I)),m=P.precision,P.precision=i=I.length*R*2;d=W(a,t,0,1,1),r=n.plus(d.times(o)),r.cmp(e)!=1;)n=o,o=r,r=l,l=u.plus(d.times(r)),u=r,r=t,t=a.minus(d.times(r)),a=r;return r=W(e.minus(n),o,0,1,1),u=u.plus(r.times(l)),n=n.plus(r.times(o)),u.s=l.s=g.s,p=W(l,o,i,1).minus(g).abs().cmp(W(u,n,i,1).minus(g).abs())<1?[l,o]:[u,n],P.precision=m,N=!0,p};A.toHexadecimal=A.toHex=function(e,t){return Ut(this,16,e,t)};A.toNearest=function(e,t){var n=this,o=n.constructor;if(n=new o(n),e==null){if(!n.d)return n;e=new o(1),t=o.rounding}else{if(e=new o(e),t===void 0?t=o.rounding:re(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(N=!1,n=W(n,e,0,t,1).times(e),N=!0,C(n)):(e.s=n.s,n=e),n};A.toNumber=function(){return+this};A.toOctal=function(e,t){return Ut(this,8,e,t)};A.toPower=A.pow=function(e){var t,n,o,r,i,s,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(Q(+a,l));if(a=new u(a),a.eq(1))return a;if(o=u.precision,i=u.rounding,e.eq(1))return C(a,o,i);if(t=$(e.e/R),t>=e.d.length-1&&(n=l<0?-l:l)<=Xo)return r=Mn(u,a,n,o),e.s<0?new u(1).div(r):C(r,o,i);if(s=a.s,s<0){if(t<e.d.length-1)return new u(NaN);if((e.d[t]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=Q(+a,l),t=n==0||!isFinite(n)?$(l*(Math.log("0."+Z(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(N=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),r=Wt(e.times(Ie(a,o+n)),o),r.d&&(r=C(r,o+5,1),Ue(r.d,o,i)&&(t=o+10,r=C(Wt(e.times(Ie(a,t+n)),t),t+5,1),+Z(r.d).slice(o+1,o+15)+1==1e14&&(r=C(r,o+1,0)))),r.s=s,N=!0,u.rounding=i,C(r,o,i))};A.toPrecision=function(e,t){var n,o=this,r=o.constructor;return e===void 0?n=fe(o,o.e<=r.toExpNeg||o.e>=r.toExpPos):(re(e,1,xe),t===void 0?t=r.rounding:re(t,0,8),o=C(new r(o),e,t),n=fe(o,e<=o.e||o.e<=r.toExpNeg,e)),o.isNeg()&&!o.isZero()?"-"+n:n};A.toSignificantDigits=A.toSD=function(e,t){var n=this,o=n.constructor;return e===void 0?(e=o.precision,t=o.rounding):(re(e,1,xe),t===void 0?t=o.rounding:re(t,0,8)),C(new o(n),e,t)};A.toString=function(){var e=this,t=e.constructor,n=fe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};A.truncated=A.trunc=function(){return C(new this.constructor(this),this.e+1,1)};A.valueOf=A.toJSON=function(){var e=this,t=e.constructor,n=fe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Z(e){var t,n,o,r=e.length-1,i="",s=e[0];if(r>0){for(i+=s,t=1;t<r;t++)o=e[t]+"",n=R-o.length,n&&(i+=Te(n)),i+=o;s=e[t],o=s+"",n=R-o.length,n&&(i+=Te(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function re(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Be+e)}function Ue(e,t,n,o){var r,i,s,a;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=R,r=0):(r=Math.ceil((t+1)/R),t%=R),i=Q(10,R-t),a=e[r]%i|0,o==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==i||n>3&&a+1==i/2)&&(e[r+1]/i/100|0)==Q(10,t-2)-1||(a==i/2||a==0)&&(e[r+1]/i/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(o||n<4)&&a==9999||!o&&n>3&&a==4999):s=((o||n<4)&&a+1==i||!o&&n>3&&a+1==i/2)&&(e[r+1]/i/1e3|0)==Q(10,t-3)-1,s}function st(e,t,n){for(var o,r=[0],i,s=0,a=e.length;s<a;){for(i=r.length;i--;)r[i]*=t;for(r[0]+=Ft.indexOf(e.charAt(s++)),o=0;o<r.length;o++)r[o]>n-1&&(r[o+1]===void 0&&(r[o+1]=0),r[o+1]+=r[o]/n|0,r[o]%=n)}return r.reverse()}function Qo(e,t){var n,o,r;if(t.isZero())return t;o=t.d.length,o<32?(n=Math.ceil(o/3),r=(1/dt(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=ve(e,1,t.times(r),new e(1));for(var i=n;i--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var W=function(){function e(o,r,i){var s,a=0,u=o.length;for(o=o.slice();u--;)s=o[u]*r+a,o[u]=s%i|0,a=s/i|0;return a&&o.unshift(a),o}function t(o,r,i,s){var a,u;if(i!=s)u=i>s?1:-1;else for(a=u=0;a<i;a++)if(o[a]!=r[a]){u=o[a]>r[a]?1:-1;break}return u}function n(o,r,i,s){for(var a=0;i--;)o[i]-=a,a=o[i]<r[i]?1:0,o[i]=a*s+o[i]-r[i];for(;!o[0]&&o.length>1;)o.shift()}return function(o,r,i,s,a,u){var l,m,d,p,g,I,P,K,B,h,w,k,V,L,z,v,U,J,j,ce,Se=o.constructor,Ne=o.s==r.s?1:-1,H=o.d,q=r.d;if(!H||!H[0]||!q||!q[0])return new Se(!o.s||!r.s||(H?q&&H[0]==q[0]:!q)?NaN:H&&H[0]==0||!q?Ne*0:Ne/0);for(u?(g=1,m=o.e-r.e):(u=me,g=R,m=$(o.e/g)-$(r.e/g)),j=q.length,U=H.length,B=new Se(Ne),h=B.d=[],d=0;q[d]==(H[d]||0);d++);if(q[d]>(H[d]||0)&&m--,i==null?(L=i=Se.precision,s=Se.rounding):a?L=i+(o.e-r.e)+1:L=i,L<0)h.push(1),I=!0;else{if(L=L/g+2|0,d=0,j==1){for(p=0,q=q[0],L++;(d<U||p)&&L--;d++)z=p*u+(H[d]||0),h[d]=z/q|0,p=z%q|0;I=p||d<U}else{for(p=u/(q[0]+1)|0,p>1&&(q=e(q,p,u),H=e(H,p,u),j=q.length,U=H.length),v=j,w=H.slice(0,j),k=w.length;k<j;)w[k++]=0;ce=q.slice(),ce.unshift(0),J=q[0],q[1]>=u/2&&++J;do p=0,l=t(q,w,j,k),l<0?(V=w[0],j!=k&&(V=V*u+(w[1]||0)),p=V/J|0,p>1?(p>=u&&(p=u-1),P=e(q,p,u),K=P.length,k=w.length,l=t(P,w,K,k),l==1&&(p--,n(P,j<K?ce:q,K,u))):(p==0&&(l=p=1),P=q.slice()),K=P.length,K<k&&P.unshift(0),n(w,P,k,u),l==-1&&(k=w.length,l=t(q,w,j,k),l<1&&(p++,n(w,j<k?ce:q,k,u))),k=w.length):l===0&&(p++,w=[0]),h[d++]=p,l&&w[0]?w[k++]=H[v]||0:(w=[H[v]],k=1);while((v++<U||w[0]!==void 0)&&L--);I=w[0]!==void 0}h[0]||h.shift()}if(g==1)B.e=m,Kn=I;else{for(d=1,p=h[0];p>=10;p/=10)d++;B.e=d+m*g-1,C(B,a?i+B.e+1:i,s,I)}return B}}();function C(e,t,n,o){var r,i,s,a,u,l,m,d,p,g=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(r=1,a=d[0];a>=10;a/=10)r++;if(i=t-r,i<0)i+=R,s=t,m=d[p=0],u=m/Q(10,r-s-1)%10|0;else if(p=Math.ceil((i+1)/R),a=d.length,p>=a)if(o){for(;a++<=p;)d.push(0);m=u=0,r=1,i%=R,s=i-R+1}else break e;else{for(m=a=d[p],r=1;a>=10;a/=10)r++;i%=R,s=i-R+r,u=s<0?0:m/Q(10,r-s-1)%10|0}if(o=o||t<0||d[p+1]!==void 0||(s<0?m:m%Q(10,r-s-1)),l=n<4?(u||o)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||o||n==6&&(i>0?s>0?m/Q(10,r-s):0:d[p-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,l?(t-=e.e+1,d[0]=Q(10,(R-t%R)%R),e.e=-t||0):d[0]=e.e=0,e;if(i==0?(d.length=p,a=1,p--):(d.length=p+1,a=Q(10,R-i),d[p]=s>0?(m/Q(10,r-s)%Q(10,s)|0)*a:0),l)for(;;)if(p==0){for(i=1,s=d[0];s>=10;s/=10)i++;for(s=d[0]+=a,a=1;s>=10;s/=10)a++;i!=a&&(e.e++,d[0]==me&&(d[0]=1));break}else{if(d[p]+=a,d[p]!=me)break;d[p--]=0,a=1}for(i=d.length;d[--i]===0;)d.pop()}return N&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function fe(e,t,n){if(!e.isFinite())return _n(e);var o,r=e.e,i=Z(e.d),s=i.length;return t?(n&&(o=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+Te(o):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):r<0?(i="0."+Te(-r-1)+i,n&&(o=n-s)>0&&(i+=Te(o))):r>=s?(i+=Te(r+1-s),n&&(o=n-r-1)>0&&(i=i+"."+Te(o))):((o=r+1)<s&&(i=i.slice(0,o)+"."+i.slice(o)),n&&(o=n-s)>0&&(r+1===s&&(i+="."),i+=Te(o))),i}function mt(e,t){var n=e[0];for(t*=R;n>=10;n/=10)t++;return t}function ct(e,t,n){if(t>zo)throw N=!0,n&&(e.precision=n),Error(Cn);return C(new e(at),t,1,!0)}function le(e,t,n){if(t>Dt)throw Error(Cn);return C(new e(ut),t,n,!0)}function Nn(e){var t=e.length-1,n=t*R+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Te(e){for(var t="";e--;)t+="0";return t}function Mn(e,t,n,o){var r,i=new e(1),s=Math.ceil(o/R+4);for(N=!1;;){if(n%2&&(i=i.times(t),xn(i.d,s)&&(r=!0)),n=$(n/2),n===0){n=i.d.length-1,r&&i.d[n]===0&&++i.d[n];break}t=t.times(t),xn(t.d,s)}return N=!0,i}function Bn(e){return e.d[e.d.length-1]&1}function vn(e,t,n){for(var o,r=new e(t[0]),i=0;++i<t.length;)if(o=new e(t[i]),o.s)r[n](o)&&(r=o);else{r=o;break}return r}function Wt(e,t){var n,o,r,i,s,a,u,l=0,m=0,d=0,p=e.constructor,g=p.rounding,I=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(N=!1,u=I):u=t,a=new p(.03125);e.e>-2;)e=e.times(a),d+=5;for(o=Math.log(Q(2,d))/Math.LN10*2+5|0,u+=o,n=i=s=new p(1),p.precision=u;;){if(i=C(i.times(e),u,1),n=n.times(++m),a=s.plus(W(i,n,u,1)),Z(a.d).slice(0,u)===Z(s.d).slice(0,u)){for(r=d;r--;)s=C(s.times(s),u,1);if(t==null)if(l<3&&Ue(s.d,u-o,g,l))p.precision=u+=10,n=i=a=new p(1),m=0,l++;else return C(s,p.precision=I,g,N=!0);else return p.precision=I,s}s=a}}function Ie(e,t){var n,o,r,i,s,a,u,l,m,d,p,g=1,I=10,P=e,K=P.d,B=P.constructor,h=B.rounding,w=B.precision;if(P.s<0||!K||!K[0]||!P.e&&K[0]==1&&K.length==1)return new B(K&&!K[0]?-1/0:P.s!=1?NaN:K?0:P);if(t==null?(N=!1,m=w):m=t,B.precision=m+=I,n=Z(K),o=n.charAt(0),Math.abs(i=P.e)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)P=P.times(e),n=Z(P.d),o=n.charAt(0),g++;i=P.e,o>1?(P=new B("0."+n),i++):P=new B(o+"."+n.slice(1))}else return l=ct(B,m+2,w).times(i+""),P=Ie(new B(o+"."+n.slice(1)),m-I).plus(l),B.precision=w,t==null?C(P,w,h,N=!0):P;for(d=P,u=s=P=W(P.minus(1),P.plus(1),m,1),p=C(P.times(P),m,1),r=3;;){if(s=C(s.times(p),m,1),l=u.plus(W(s,new B(r),m,1)),Z(l.d).slice(0,m)===Z(u.d).slice(0,m))if(u=u.times(2),i!==0&&(u=u.plus(ct(B,m+2,w).times(i+""))),u=W(u,new B(g),m,1),t==null)if(Ue(u.d,m-I,h,a))B.precision=m+=I,l=s=P=W(d.minus(1),d.plus(1),m,1),p=C(P.times(P),m,1),r=a=1;else return C(u,B.precision=w,h,N=!0);else return B.precision=w,u;u=l,r+=2}}function _n(e){return String(e.s*e.s/0)}function qt(e,t){var n,o,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;t.charCodeAt(o)===48;o++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(o,r),t){if(r-=o,e.e=n=n-o-1,e.d=[],o=(n+1)%R,n<0&&(o+=R),o<r){for(o&&e.d.push(+t.slice(0,o)),r-=R;o<r;)e.d.push(+t.slice(o,o+=R));t=t.slice(o),o=R-t.length}else o-=r;for(;o--;)t+="0";e.d.push(+t),N&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Yo(e,t){var n,o,r,i,s,a,u,l,m;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),On.test(t))return qt(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Uo.test(t))n=16,t=t.toLowerCase();else if(qo.test(t))n=2;else if(Go.test(t))n=8;else throw Error(Be+t);for(i=t.search(/p/i),i>0?(u=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),i=t.indexOf("."),s=i>=0,o=e.constructor,s&&(t=t.replace(".",""),a=t.length,i=a-i,r=Mn(o,new o(n),i,i*2)),l=st(t,n,me),m=l.length-1,i=m;l[i]===0;--i)l.pop();return i<0?new o(e.s*0):(e.e=mt(l,m),e.d=l,N=!1,s&&(e=W(e,r,a*4)),u&&(e=e.times(Math.abs(u)<54?Q(2,u):pt.pow(2,u))),N=!0,e)}function jo(e,t){var n,o=t.d.length;if(o<3)return t.isZero()?t:ve(e,2,t,t);n=1.4*Math.sqrt(o),n=n>16?16:n|0,t=t.times(1/dt(5,n)),t=ve(e,2,t,t);for(var r,i=new e(5),s=new e(16),a=new e(20);n--;)r=t.times(t),t=t.times(i.plus(r.times(s.times(r).minus(a))));return t}function ve(e,t,n,o,r){var i,s,a,u,l=1,m=e.precision,d=Math.ceil(m/R);for(N=!1,u=n.times(n),a=new e(o);;){if(s=W(a.times(u),new e(t++*t++),m,1),a=r?o.plus(s):o.minus(s),o=W(s.times(u),new e(t++*t++),m,1),s=a.plus(o),s.d[d]!==void 0){for(i=d;s.d[i]===a.d[i]&&i--;);if(i==-1)break}i=a,a=o,o=s,s=i,l++}return N=!0,s.d.length=d+1,s}function dt(e,t){for(var n=e;--t;)n*=e;return n}function Vn(e,t){var n,o=t.s<0,r=le(e,e.precision,1),i=r.times(.5);if(t=t.abs(),t.lte(i))return Ae=o?4:1,t;if(n=t.divToInt(r),n.isZero())Ae=o?3:2;else{if(t=t.minus(n.times(r)),t.lte(i))return Ae=Bn(n)?o?2:3:o?4:1,t;Ae=Bn(n)?o?1:4:o?3:2}return t.minus(r).abs()}function Ut(e,t,n,o){var r,i,s,a,u,l,m,d,p,g=e.constructor,I=n!==void 0;if(I?(re(n,1,xe),o===void 0?o=g.rounding:re(o,0,8)):(n=g.precision,o=g.rounding),!e.isFinite())m=_n(e);else{for(m=fe(e),s=m.indexOf("."),I?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,s>=0&&(m=m.replace(".",""),p=new g(1),p.e=m.length-s,p.d=st(fe(p),10,r),p.e=p.d.length),d=st(m,10,r),i=u=d.length;d[--u]==0;)d.pop();if(!d[0])m=I?"0p+0":"0";else{if(s<0?i--:(e=new g(e),e.d=d,e.e=i,e=W(e,p,n,o,0,r),d=e.d,i=e.e,l=Kn),s=d[n],a=r/2,l=l||d[n+1]!==void 0,l=o<4?(s!==void 0||l)&&(o===0||o===(e.s<0?3:2)):s>a||s===a&&(o===4||l||o===6&&d[n-1]&1||o===(e.s<0?8:7)),d.length=n,l)for(;++d[--n]>r-1;)d[n]=0,n||(++i,d.unshift(1));for(u=d.length;!d[u-1];--u);for(s=0,m="";s<u;s++)m+=Ft.charAt(d[s]);if(I){if(u>1)if(t==16||t==8){for(s=t==16?4:3,--u;u%s;u++)m+="0";for(d=st(m,r,t),u=d.length;!d[u-1];--u);for(s=1,m="1.";s<u;s++)m+=Ft.charAt(d[s])}else m=m.charAt(0)+"."+m.slice(1);m=m+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)m="0"+m;m="0."+m}else if(++i>u)for(i-=u;i--;)m+="0";else i<u&&(m=m.slice(0,i)+"."+m.slice(i))}m=(t==16?"0x":t==2?"0b":t==8?"0o":"")+m}return e.s<0?"-"+m:m}function xn(e,t){if(e.length>t)return e.length=t,!0}function Ho(e){return new this(e).abs()}function Zo(e){return new this(e).acos()}function Jo(e){return new this(e).acosh()}function $o(e,t){return new this(e).plus(t)}function er(e){return new this(e).asin()}function tr(e){return new this(e).asinh()}function nr(e){return new this(e).atan()}function or(e){return new this(e).atanh()}function rr(e,t){e=new this(e),t=new this(t);var n,o=this.precision,r=this.rounding,i=o+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=le(this,i,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?le(this,o,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=le(this,i,1).times(.5),n.s=e.s):t.s<0?(this.precision=i,this.rounding=1,n=this.atan(W(e,t,i,1)),t=le(this,i,1),this.precision=o,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(W(e,t,i,1)),n}function ir(e){return new this(e).cbrt()}function sr(e){return C(e=new this(e),e.e+1,2)}function ar(e,t,n){return new this(e).clamp(t,n)}function ur(e){if(!e||typeof e!="object")throw Error(lt+"Object expected");var t,n,o,r=e.defaults===!0,i=["precision",1,xe,"rounding",0,8,"toExpNeg",-Me,0,"toExpPos",0,Me,"maxE",0,Me,"minE",-Me,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],r&&(this[n]=Et[n]),(o=e[n])!==void 0)if($(o)===o&&o>=i[t+1]&&o<=i[t+2])this[n]=o;else throw Error(Be+n+": "+o);if(n="crypto",r&&(this[n]=Et[n]),(o=e[n])!==void 0)if(o===!0||o===!1||o===0||o===1)if(o)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Rn);else this[n]=!1;else throw Error(Be+n+": "+o);return this}function cr(e){return new this(e).cos()}function lr(e){return new this(e).cosh()}function Fn(e){var t,n,o;function r(i){var s,a,u,l=this;if(!(l instanceof r))return new r(i);if(l.constructor=r,Sn(i)){l.s=i.s,N?!i.d||i.e>r.maxE?(l.e=NaN,l.d=null):i.e<r.minE?(l.e=0,l.d=[0]):(l.e=i.e,l.d=i.d.slice()):(l.e=i.e,l.d=i.d?i.d.slice():i.d);return}if(u=typeof i,u==="number"){if(i===0){l.s=1/i<0?-1:1,l.e=0,l.d=[0];return}if(i<0?(i=-i,l.s=-1):l.s=1,i===~~i&&i<1e7){for(s=0,a=i;a>=10;a/=10)s++;N?s>r.maxE?(l.e=NaN,l.d=null):s<r.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[i]):(l.e=s,l.d=[i]);return}else if(i*0!==0){i||(l.s=NaN),l.e=NaN,l.d=null;return}return qt(l,i.toString())}else if(u!=="string")throw Error(Be+i);return(a=i.charCodeAt(0))===45?(i=i.slice(1),l.s=-1):(a===43&&(i=i.slice(1)),l.s=1),On.test(i)?qt(l,i):Yo(l,i)}if(r.prototype=A,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=ur,r.clone=Fn,r.isDecimal=Sn,r.abs=Ho,r.acos=Zo,r.acosh=Jo,r.add=$o,r.asin=er,r.asinh=tr,r.atan=nr,r.atanh=or,r.atan2=rr,r.cbrt=ir,r.ceil=sr,r.clamp=ar,r.cos=cr,r.cosh=lr,r.div=mr,r.exp=dr,r.floor=pr,r.hypot=fr,r.ln=yr,r.log=br,r.log10=Ar,r.log2=gr,r.max=wr,r.min=Pr,r.mod=kr,r.mul=hr,r.pow=Tr,r.random=Ir,r.round=Br,r.sign=xr,r.sin=Sr,r.sinh=Kr,r.sqrt=Cr,r.sub=Rr,r.sum=Lr,r.tan=Or,r.tanh=Nr,r.trunc=Mr,e===void 0&&(e={}),e&&e.defaults!==!0)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<o.length;)e.hasOwnProperty(n=o[t++])||(e[n]=this[n]);return r.config(e),r}function mr(e,t){return new this(e).div(t)}function dr(e){return new this(e).exp()}function pr(e){return C(e=new this(e),e.e+1,3)}function fr(){var e,t,n=new this(0);for(N=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return N=!0,new this(1/0);n=t}return N=!0,n.sqrt()}function Sn(e){return e instanceof pt||e&&e.toStringTag===Ln||!1}function yr(e){return new this(e).ln()}function br(e,t){return new this(e).log(t)}function gr(e){return new this(e).log(2)}function Ar(e){return new this(e).log(10)}function wr(){return vn(this,arguments,"lt")}function Pr(){return vn(this,arguments,"gt")}function kr(e,t){return new this(e).mod(t)}function hr(e,t){return new this(e).mul(t)}function Tr(e,t){return new this(e).pow(t)}function Ir(e){var t,n,o,r,i=0,s=new this(1),a=[];if(e===void 0?e=this.precision:re(e,1,xe),o=Math.ceil(e/R),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(o));i<o;)r=t[i],r>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:a[i++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(o*=4);i<o;)r=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((t[i+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,i):(a.push(r%1e7),i+=4);i=o/4}else throw Error(Rn);else for(;i<o;)a[i++]=Math.random()*1e7|0;for(o=a[--i],e%=R,o&&e&&(r=Q(10,R-e),a[i]=(o/r|0)*r);a[i]===0;i--)a.pop();if(i<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=R)a.shift();for(o=1,r=a[0];r>=10;r/=10)o++;o<R&&(n-=R-o)}return s.e=n,s.d=a,s}function Br(e){return C(e=new this(e),e.e+1,this.rounding)}function xr(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Sr(e){return new this(e).sin()}function Kr(e){return new this(e).sinh()}function Cr(e){return new this(e).sqrt()}function Rr(e,t){return new this(e).sub(t)}function Lr(){var e=0,t=arguments,n=new this(t[e]);for(N=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return N=!0,C(n,this.precision,this.rounding)}function Or(e){return new this(e).tan()}function Nr(e){return new this(e).tanh()}function Mr(e){return C(e=new this(e),e.e+1,1)}A[Symbol.for("nodejs.util.inspect.custom")]=A.toString;A[Symbol.toStringTag]="Decimal";var pt=A.constructor=Fn(Et);at=new pt(at);ut=new pt(ut);import{PublicKey as Xt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as vr}from"@solana/spl-token";import{PublicKey as X,SystemProgram as En,SYSVAR_RENT_PUBKEY as _r}from"@solana/web3.js";function _e({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var Vr=[_e({pubkey:vr,isWritable:!1}),_e({pubkey:En.programId,isWritable:!1}),_e({pubkey:_r,isWritable:!1})];function Gt({publicKey:e,transformSol:t}){let n=Dn(e.toString());if(n instanceof X)return t&&n.equals(Ke)?ye:n;if(t&&n.toString()===Ke.toBase58())return ye;if(typeof n=="string"){if(n===X.default.toBase58())return X.default;try{return new X(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Dn(e){try{return new X(e)}catch{return e}}var Fr=new X("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Wn=new X("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ge=new X("SysvarRent111111111111111111111111111111111"),Er=new X("SysvarC1ock11111111111111111111111111111111"),qn=new X("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Dr=new X("Sysvar1nstructions1111111111111111111111111"),Un=En.programId,ma=new X("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),da=new X("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),pa=new X("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),fa=new X("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ya=new X("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),ba=new X("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),ga=new X("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Aa=new X("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),wa=new X("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Pa=new X("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),ka=new X("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ye=new X("So11111111111111111111111111111111111111112"),Ke=X.default;function Ce(e){return Gt({publicKey:e,transformSol:!0})}import{PublicKey as Wr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Gn}from"@solana/spl-token";var ft={chainId:101,address:Wr.default.toBase58(),programId:Gn.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},be={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Gn.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var zt=class{constructor({mint:t,decimals:n,symbol:o,name:r,skipMint:i=!1,isToken2022:s=!1}){if(t===Ke.toBase58()||t instanceof Xt&&Ke.equals(t)){this.decimals=be.decimals,this.symbol=be.symbol,this.name=be.name,this.mint=new Xt(be.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=o||t.toString().substring(0,6),this.name=r||t.toString().substring(0,6),this.mint=i?Xt.default:Gt({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},ee=zt;ee.WSOL=new zt(E(M({},be),{mint:be.address}));import bt from"big.js";import Gr from"bn.js";import Xr from"decimal.js-light";import qr from"toformat";var Ur=qr,Xe=Ur;var yt=_("module/fraction"),Qt=Xe(bt),ze=Xe(Xr),zr={[0]:ze.ROUND_DOWN,[1]:ze.ROUND_HALF_UP,[2]:ze.ROUND_UP},Qr={[0]:bt.roundDown,[1]:bt.roundHalfUp,[2]:bt.roundUp},G=class{constructor(t,n=new Gr(1)){this.numerator=ne(t),this.denominator=ne(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new G(this.denominator,this.numerator)}add(t){let n=t instanceof G?t:new G(ne(t));return this.denominator.eq(n.denominator)?new G(this.numerator.add(n.numerator),this.denominator):new G(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof G?t:new G(ne(t));return this.denominator.eq(n.denominator)?new G(this.numerator.sub(n.numerator),this.denominator):new G(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof G?t:new G(ne(t));return new G(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof G?t:new G(ne(t));return new G(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},o=1){Number.isInteger(t)||yt.logWithError(`${t} is not an integer.`),t<=0&&yt.logWithError(`${t} is not positive.`),ze.set({precision:t+1,rounding:zr[o]});let r=new ze(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return r.toFormat(r.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},o=1){return Number.isInteger(t)||yt.logWithError(`${t} is not an integer.`),t<0&&yt.logWithError(`${t} is negative.`),Qt.DP=t,Qt.RM=Qr[o]||1,new Qt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};var Qa=_("Raydium_price");var Yt=class{constructor({decimals:t,symbol:n="UNKNOWN",name:o="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=o}equals(t){return this===t}},gt=Yt;gt.SOL=new Yt(ft);import jr from"bn.js";var tu=new G(new jr(100));var Ve=new ie(0),Hr=new ie(1),Pu=new ie(2),ku=new ie(3),hu=new ie(5),Zr=new ie(10),Tu=new ie(100),Iu=new ie(1e3),Bu=new ie(1e4),Xn=9007199254740991;function ne(e){let t=_("Raydium_parseBigNumberish");if(e instanceof ie)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new ie(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Xn||e<=-Xn)&&t.logWithError(`BigNumberish number overflow: ${e}`),new ie(String(e))):typeof e=="bigint"?new ie(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new ie(0))}var Eu=_("Raydium_amount"),Du=Xe(Jr);async function zn(e){new Promise(t=>setTimeout(t,e))}import{PublicKey as He,sendAndConfirmTransaction as $t,Transaction as Ze,TransactionMessage as Je,VersionedTransaction as $e}from"@solana/web3.js";import ri from"axios";var oe={CreateAccount:"CreateAccount",InitAccount:"InitAccount",CreateATA:"CreateATA",CloseAccount:"CloseAccount",TransferAmount:"TransferAmount",InitMint:"InitMint",MintTo:"MintTo",InitMarket:"InitMarket",Util1216OwnerClaim:"Util1216OwnerClaim",SetComputeUnitPrice:"SetComputeUnitPrice",SetComputeUnitLimit:"SetComputeUnitLimit",ClmmCreatePool:"ClmmCreatePool",ClmmOpenPosition:"ClmmOpenPosition",ClmmIncreasePosition:"ClmmIncreasePosition",ClmmDecreasePosition:"ClmmDecreasePosition",ClmmClosePosition:"ClmmClosePosition",ClmmSwapBaseIn:"ClmmSwapBaseIn",ClmmSwapBaseOut:"ClmmSwapBaseOut",ClmmInitReward:"ClmmInitReward",ClmmSetReward:"ClmmSetReward",ClmmCollectReward:"ClmmCollectReward",AmmV4Swap:"AmmV4Swap",AmmV4AddLiquidity:"AmmV4AddLiquidity",AmmV4RemoveLiquidity:"AmmV4RemoveLiquidity",AmmV4SimulatePoolInfo:"AmmV4SimulatePoolInfo",AmmV4SwapBaseIn:"AmmV4SwapBaseIn",AmmV4SwapBaseOut:"AmmV4SwapBaseOut",AmmV4CreatePool:"AmmV4CreatePool",AmmV4InitPool:"AmmV4InitPool",AmmV5AddLiquidity:"AmmV5AddLiquidity",AmmV5RemoveLiquidity:"AmmV5RemoveLiquidity",AmmV5SimulatePoolInfo:"AmmV5SimulatePoolInfo",AmmV5SwapBaseIn:"AmmV5SwapBaseIn",AmmV5SwapBaseOut:"AmmV5SwapBaseOut",RouteSwap:"RouteSwap",RouteSwap1:"RouteSwap1",RouteSwap2:"RouteSwap2",FarmV3Deposit:"FarmV3Deposit",FarmV3Withdraw:"FarmV3Withdraw",FarmV3CreateLedger:"FarmV3CreateLedger",FarmV5Deposit:"FarmV5Deposit",FarmV5Withdraw:"FarmV5Withdraw",FarmV5CreateLedger:"FarmV5CreateLedger",FarmV6Deposit:"FarmV6Deposit",FarmV6Withdraw:"FarmV6Withdraw",FarmV6Create:"FarmV6Create",FarmV6Restart:"FarmV6Restart",FarmV6CreatorAddReward:"FarmV6CreatorAddReward",FarmV6CreatorWithdraw:"FarmV6CreatorWithdraw",CpmmCreatePool:"CpmmCreatePool",CpmmAddLiquidity:"CpmmAddLiquidity",CpmmWithdrawLiquidity:"CpmmWithdrawLiquidity",CpmmSwapBaseIn:"CpmmSwapBaseIn",CpmmSwapBaseOut:"CpmmSwapBaseOut"};import{PublicKey as $r,ComputeBudgetProgram as Qn,Transaction as jn,TransactionMessage as ei,Keypair as Hn,VersionedTransaction as Zn}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ti}from"@solana/spl-token";var Yn=_("Raydium_txUtil"),Jn=1644;function wt(e){let t=[],n=[];return e.microLamports&&(t.push(Qn.setComputeUnitPrice({microLamports:e.microLamports})),n.push(oe.SetComputeUnitPrice)),e.units&&(t.push(Qn.setComputeUnitLimit({units:e.units})),n.push(oe.SetComputeUnitLimit)),{instructions:t,instructionTypes:n}}async function Ee(e,t){var o,r;let n=t!=null?t:"confirmed";try{return((r=await((o=e.getLatestBlockhash)==null?void 0:o.call(e,{commitment:n})))==null?void 0:r.blockhash)||(await e.getRecentBlockhash(n)).blockhash}catch{return(await e.getRecentBlockhash(n)).blockhash}}function jt(e,t){e.length<1&&Yn.logWithError(`no instructions provided: ${e.toString()}`),t.length<1&&Yn.logWithError(`no signers provided:, ${t.toString()}`);let n=new jn;n.recentBlockhash="11111111111111111111111111111111",n.feePayer=t[0],n.add(...e);try{return Buffer.from(n.serialize({verifySignatures:!1})).toString("base64").length<Jn}catch{return!1}}function we(e,t){let[n,o]=$r.findProgramAddressSync(e,t);return{publicKey:n,nonce:o}}function Ye({instructions:e,payer:t,signers:n}){return jt(e,[t,...n])}function je({instructions:e,payer:t,lookupTableAddressAccount:n,recentBlockhash:o=Hn.generate().publicKey.toString()}){let i=new ei({payerKey:t,recentBlockhash:o,instructions:e}).compileToV0Message(Object.values(n!=null?n:{}));try{return Buffer.from(new Zn(i).serialize()).toString("base64").length<Jn}catch{return!1}}var ni=e=>Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e);function Re(e){let t=[];return e.forEach(n=>{n instanceof jn&&(n.recentBlockhash||(n.recentBlockhash=ti.toBase58()),n.feePayer||(n.feePayer=Hn.generate().publicKey));let o=n.serialize({requireAllSignatures:!1,verifySignatures:!1});n instanceof Zn&&(o=ni(o));let r=o.toString("base64");t.push(r)}),console.log("simulate tx string:",t),t}import{PublicKey as $n,AddressLookupTableAccount as Pt}from"@solana/web3.js";import{PublicKey as oi}from"@solana/web3.js";import{MINT_SIZE as wc,TOKEN_PROGRAM_ID as Pc,getTransferFeeConfig as kc,unpackMint as hc}from"@solana/spl-token";var Ht=_("Raydium_accountInfo_util");async function De(e,t,n){let{batchRequest:o,commitment:r="confirmed",chunkCount:i=100}=M({batchRequest:!1},n),s=Zt(t,i),a=new Array(s.length).fill([]);if(o){let u=s.map(d=>{let p=e._buildArgs([d.map(g=>g.toBase58())],r,"base64");return{methodName:"getMultipleAccounts",args:p}}),l=Zt(u,10);a=(await(await Promise.all(l.map(async d=>await e._rpcBatchRequest(d)))).flat()).map(d=>(d.error&&Ht.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${d.error.message}`),d.result.value.map(p=>{if(p){let{data:g,executable:I,lamports:P,owner:K,rentEpoch:B}=p;return g.length!==2&&g[1]!=="base64"&&Ht.logWithError("info must be base64 encoded, RPC_ERROR"),{data:Buffer.from(g[0],"base64"),executable:I,lamports:P,owner:new oi(K),rentEpoch:B}}return null})))}else try{a=await Promise.all(s.map(u=>e.getMultipleAccountsInfo(u,r)))}catch(u){u instanceof Error&&Ht.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${u.message}`)}return a.flat()}async function Jt({connection:e,address:t}){let n=await De(e,[...new Set(t.map(r=>r.toString()))].map(r=>new $n(r))),o={};for(let r=0;r<t.length;r++){let i=n[r],s=t[r];if(!i)continue;let a=new Pt({key:s,state:Pt.deserialize(i.data)});o[s.toString()]=a,kt[s.toString()]=a}return o}var kt={"2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17":new Pt({key:new $n("2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17"),state:Pt.deserialize(Buffer.from("AQAAAP//////////d49+DAAAAAAAAQZMWvw7GUNJdaccNBVnb57OKakxL2BHLYvhRwVILRsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGRm/lIRcy/+ytunLDm+e8jOW7xfcSayxDmzpAAAAABt324ddloZPZy+FGzut5rBy0he1fWzeROoz1hX7/AKkG3fbh7nWP3hhCXbzkbM3athr8TYO5DSf+vfko2KGL/AVKU1D4XciC1hSlVnJ4iilt3x6rq9CmBniISTL07vagBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvDQdRqCgtphMF/imcN7mY5YRx2xE1A3MQ+L4QRaYK9u4GRfZP3LsAd00a+IkCpA22UNQMKdq5BFbJuwuOLqc8zxCTDlqxBG8J0HcxtfogQHDK06ukzfaXiNDKAob1MqBHS9lJxDYCwz8gd5DtFqNSTKG5l1zxIaKpDP/sffi2is1H9aKveyXSu5StXElYRl9SD5As0DHE4N0GLnf84/siiKXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu9N9LMnrw/JNO0hqMVB4rk/2ou4AB1loQ7FZoPwut2o4KZB+0p9xnbrQKw038qjpHar+PyDwvxBRcu5hpHw3dguezeWv+IwvgW5icu8EGkhGa9AkFPPJT7VMSFb8xowveU=","base64"))})};var ht=class{constructor(t){this.instructions=[];this.endInstructions=[];this.lookupTableAddress=[];this.signers=[];this.instructionTypes=[];this.endInstructionTypes=[];this.connection=t.connection,this.feePayer=t.feePayer,this.signAllTransactions=t.signAllTransactions,this.owner=t.owner,this.cluster=t.cluster,this.blockhashCommitment=t.blockhashCommitment,this.api=t.api}get AllTxData(){return{instructions:this.instructions,endInstructions:this.endInstructions,signers:this.signers,instructionTypes:this.instructionTypes,endInstructionTypes:this.endInstructionTypes,lookupTableAddress:this.lookupTableAddress}}get allInstructions(){return[...this.instructions,...this.endInstructions]}async getComputeBudgetConfig(){var o;let t=(await ri.get(`https://solanacompass.com/api/fees?cacheFreshTime=${3e5}`)).data,{avg:n}=(o=t==null?void 0:t[15])!=null?o:{};if(!!n)return{units:6e5,microLamports:Math.min(Math.ceil(n*1e6/6e5),25e3)}}addCustomComputeBudget(t){if(t){let{instructions:n,instructionTypes:o}=wt(t);return this.instructions.unshift(...n),this.instructionTypes.unshift(...o),!0}return!1}async calComputeBudget({config:t,defaultIns:n}){try{let o=t||await this.getComputeBudgetConfig();if(this.addCustomComputeBudget(o))return;n&&this.instructions.unshift(...n)}catch{n&&this.instructions.unshift(...n)}}addInstruction({instructions:t=[],endInstructions:n=[],signers:o=[],instructionTypes:r=[],endInstructionTypes:i=[],lookupTableAddress:s=[]}){return this.instructions.push(...t),this.endInstructions.push(...n),this.signers.push(...o),this.instructionTypes.push(...r),this.endInstructionTypes.push(...i),this.lookupTableAddress.push(...s.filter(a=>a!==He.default.toString())),this}async versionBuild({txVersion:t,extInfo:n}){return t===0?await this.buildV0(M({},n||{})):this.build(n)}build(t){var o;let n=new Ze;return this.allInstructions.length&&n.add(...this.allInstructions),n.feePayer=this.feePayer,((o=this.owner)==null?void 0:o.signer)&&!this.signers.some(r=>r.publicKey.equals(this.owner.publicKey))&&this.signers.push(this.owner.signer),{builder:this,transaction:n,signers:this.signers,instructionTypes:[...this.instructionTypes,...this.endInstructionTypes],execute:async r=>{var l;let{recentBlockHash:i,skipPreflight:s=!0,sendAndConfirm:a}=r||{},u=i!=null?i:await Ee(this.connection,this.blockhashCommitment);if(n.recentBlockhash=u,this.signers.length&&n.sign(...this.signers),Re([n]),(l=this.owner)!=null&&l.isKeyPair)return{txId:a?await $t(this.connection,n,this.signers.find(d=>d.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:s}):await this.connection.sendRawTransaction(n.serialize(),{skipPreflight:s}),signedTx:n};if(this.signAllTransactions){let m=await this.signAllTransactions([n]);return{txId:await this.connection.sendRawTransaction(m[0].serialize(),{skipPreflight:s}),signedTx:m[0]}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:t||{}}}buildMultiTx(t){var l;let{extraPreBuildData:n=[],extInfo:o}=t,{transaction:r}=this.build(o),i=n.filter(m=>m.transaction.instructions.length>0),s=[r,...i.map(m=>m.transaction)],a=[this.signers,...i.map(m=>m.signers)],u=[...this.instructionTypes,...i.map(m=>m.instructionTypes).flat()];return(l=this.owner)!=null&&l.signer&&a.forEach(m=>{m.some(d=>d.publicKey.equals(this.owner.publicKey))||this.signers.push(this.owner.signer)}),{builder:this,transactions:s,signers:a,instructionTypes:u,execute:async m=>{var K;let{sequentially:d,onTxUpdate:p,recentBlockHash:g,skipPreflight:I=!0}=m||{},P=g!=null?g:await Ee(this.connection,this.blockhashCommitment);if((K=this.owner)!=null&&K.isKeyPair){if(d){let B=[];for(let h of s){let w=await $t(this.connection,h,this.signers.find(k=>k.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:I});B.push(w)}return{txIds:B,signedTxs:s}}return{txIds:await await Promise.all(s.map(async B=>(B.recentBlockhash=P,await this.connection.sendRawTransaction(B.serialize(),{skipPreflight:I})))),signedTxs:s}}if(this.signAllTransactions){let B=s.map((w,k)=>(w.recentBlockhash=P,a[k].length&&w.sign(...a[k]),w));Re(B);let h=await this.signAllTransactions(B);if(d){let w=0,k=[],V=async()=>{if(!h[w])return;let L=await this.connection.sendRawTransaction(h[w].serialize(),{skipPreflight:I});k.push({txId:L,status:"sent",signedTx:h[w]}),p==null||p([...k]),w++,this.connection.onSignature(L,z=>{let v=k.findIndex(U=>U.txId===L);v>-1&&(k[v].status=z.err?"error":"success"),p==null||p([...k]),z.err||V()},"processed"),this.connection.getSignatureStatus(L)};return await V(),{txIds:k.map(L=>L.txId),signedTxs:h}}else{let w=[];for(let k=0;k<h.length;k+=1){let V=await this.connection.sendRawTransaction(h[k].serialize(),{skipPreflight:I});w.push(V)}return{txIds:w,signedTxs:h}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:o||{}}}async versionMultiBuild({extraPreBuildData:t,txVersion:n,extInfo:o}){return n===0?await this.buildV0MultiTx({extraPreBuildData:t,buildProps:o||{}}):this.buildMultiTx({extraPreBuildData:t,extInfo:o})}async buildV0(t){var g;let p=t||{},{lookupTableCache:n={},lookupTableAddress:o=[],forerunCreate:r}=p,i=pe(p,["lookupTableCache","lookupTableAddress","forerunCreate"]),s=M(M({},this.cluster==="devnet"?{}:kt),n),a=Array.from(new Set([...o,...this.lookupTableAddress])),u=[];for(let I of a)s[I]===void 0&&u.push(new He(I));let l=await Jt({connection:this.connection,address:u});for(let[I,P]of Object.entries(l))s[I]=P;let m=new Je({payerKey:this.feePayer,recentBlockhash:r?He.default.toBase58():await Ee(this.connection,this.blockhashCommitment),instructions:[...this.allInstructions]}).compileToV0Message(Object.values(s));((g=this.owner)==null?void 0:g.signer)&&!this.signers.some(I=>I.publicKey.equals(this.owner.publicKey))&&this.signers.push(this.owner.signer);let d=new $e(m);return d.sign(this.signers),{builder:this,transaction:d,signers:this.signers,instructionTypes:[...this.instructionTypes,...this.endInstructionTypes],execute:async I=>{var h;let{recentBlockHash:P,skipPreflight:K=!0,sendAndConfirm:B}=I||{};if(P&&(d.message.recentBlockhash=P),Re([d]),(h=this.owner)!=null&&h.isKeyPair){let w=await this.connection.sendTransaction(d,{skipPreflight:K});if(B){let{lastValidBlockHeight:k,blockhash:V}=await this.connection.getLatestBlockhash({commitment:this.blockhashCommitment});await this.connection.confirmTransaction({blockhash:V,lastValidBlockHeight:k,signature:w},"confirmed")}return{txId:w,signedTx:d}}if(this.signAllTransactions){let w=await this.signAllTransactions([d]);return{txId:await this.connection.sendTransaction(w[0],{skipPreflight:K}),signedTx:w[0]}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:i||{}}}async buildV0MultiTx(t){var l;let{extraPreBuildData:n=[],buildProps:o}=t,{transaction:r}=await this.buildV0(o),i=n.filter(m=>m.builder.instructions.length>0),s=[r,...i.map(m=>m.transaction)],a=[this.signers,...i.map(m=>m.signers)],u=[...this.instructionTypes,...i.map(m=>m.instructionTypes).flat()];return(l=this.owner)!=null&&l.signer&&a.forEach(m=>{m.some(d=>d.publicKey.equals(this.owner.publicKey))||this.signers.push(this.owner.signer)}),s.forEach(async(m,d)=>{m.sign(a[d])}),{builder:this,transactions:s,signers:a,instructionTypes:u,buildProps:o,execute:async m=>{var P;let{sequentially:d,onTxUpdate:p,recentBlockHash:g,skipPreflight:I=!0}=m||{};if(g&&s.forEach(K=>K.message.recentBlockhash=g),Re(s),(P=this.owner)!=null&&P.isKeyPair){if(d){let K=[];for(let B of s){let h=await this.connection.sendTransaction(B,{skipPreflight:I}),{lastValidBlockHeight:w,blockhash:k}=await this.connection.getLatestBlockhash({commitment:this.blockhashCommitment});await this.connection.confirmTransaction({blockhash:k,lastValidBlockHeight:w,signature:h},"confirmed"),K.push(h)}return{txIds:K,signedTxs:s}}return{txIds:await Promise.all(s.map(async K=>await this.connection.sendTransaction(K,{skipPreflight:I}))),signedTxs:s}}if(this.signAllTransactions){let K=await this.signAllTransactions(s);if(d){let B=0,h=[],w=async()=>{if(!K[B])return;let k=await this.connection.sendTransaction(K[B],{skipPreflight:I});h.push({txId:k,status:"sent",signedTx:K[B]}),p==null||p([...h]),B++,this.connection.onSignature(k,V=>{let L=h.findIndex(z=>z.txId===k);L>-1&&(h[L].status=V.err?"error":"success"),p==null||p([...h]),V.err||w()},"processed"),this.connection.getSignatureStatus(k)};return w(),{txIds:[],signedTxs:K}}else{let B=[];for(let h=0;h<K.length;h+=1){let w=await this.connection.sendTransaction(K[h],{skipPreflight:I});B.push(w)}return{txIds:B,signedTxs:K}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:o||{}}}async sizeCheckBuild(t){var m;let l=t||{},{computeBudgetConfig:n}=l,o=pe(l,["computeBudgetConfig"]),r=n?wt(n):{instructions:[],instructionTypes:[]},i=this.signers.reduce((d,p)=>E(M({},d),{[p.publicKey.toBase58()]:p}),{}),s=[],a=[],u=[];if(this.allInstructions.forEach(d=>{let p=[...u,d],g=n?[...r.instructions,...p]:p,P=[...new Set(p.map(K=>K.keys.filter(B=>B.isSigner).map(B=>B.pubkey.toString())).flat()).values()].map(K=>new He(K));if(u.length<12&&Ye({instructions:g,payer:this.feePayer,signers:P})||Ye({instructions:p,payer:this.feePayer,signers:P}))u.push(d);else{if(u.length===0)throw Error("item ins too big");Ye({instructions:n?[...r.instructions,...u]:[...u],payer:this.feePayer,signers:P})?s.push(new Ze().add(...r.instructions,...u)):s.push(new Ze().add(...u)),a.push(Array.from(new Set(u.map(K=>K.keys.filter(B=>B.isSigner).map(B=>B.pubkey.toString())).flat())).map(K=>i[K]).filter(K=>K!==void 0)),u=[d]}}),u.length>0){let p=[...new Set(u.map(g=>g.keys.filter(I=>I.isSigner).map(I=>I.pubkey.toString())).flat()).values()].map(g=>i[g]).filter(g=>g!==void 0);Ye({instructions:n?[...r.instructions,...u]:[...u],payer:this.feePayer,signers:p.map(g=>g.publicKey)})?s.push(new Ze().add(...r.instructions,...u)):s.push(new Ze().add(...u)),a.push(p)}return s.forEach(d=>d.feePayer=this.feePayer),(m=this.owner)!=null&&m.signer&&a.forEach(d=>{d.some(p=>p.publicKey.equals(this.owner.publicKey))||d.push(this.owner.signer)}),{builder:this,transactions:s,signers:a,instructionTypes:this.instructionTypes,execute:async d=>{var B;let{sequentially:p,onTxUpdate:g,recentBlockHash:I,skipPreflight:P=!0}=d||{},K=I!=null?I:await Ee(this.connection,this.blockhashCommitment);if(s.forEach(async(h,w)=>{h.recentBlockhash=K,a[w].length&&h.sign(...a[w])}),Re(s),(B=this.owner)!=null&&B.isKeyPair){if(p){let h=[];for(let w of s){let k=await $t(this.connection,w,this.signers.find(V=>V.publicKey.equals(this.owner.publicKey))?this.signers:[...this.signers,this.owner.signer],{skipPreflight:P});h.push(k)}return{txIds:h,signedTxs:s}}return{txIds:await Promise.all(s.map(async h=>await this.connection.sendRawTransaction(h.serialize(),{skipPreflight:P}))),signedTxs:s}}if(this.signAllTransactions){let h=await this.signAllTransactions(s);if(p){let w=0,k=[],V=async()=>{if(!h[w])return;let L=await this.connection.sendRawTransaction(h[w].serialize(),{skipPreflight:P});k.push({txId:L,status:"sent",signedTx:h[w]}),g==null||g([...k]),w++,this.connection.onSignature(L,z=>{let v=k.findIndex(U=>U.txId===L);v>-1&&(k[v].status=z.err?"error":"success"),g==null||g([...k]),z.err||V()},"processed"),this.connection.getSignatureStatus(L)};return await V(),{txIds:k.map(L=>L.txId),signedTxs:h}}else{let w=[];for(let k=0;k<h.length;k+=1){let V=await this.connection.sendRawTransaction(h[k].serialize(),{skipPreflight:P});w.push(V)}return{txIds:w,signedTxs:h}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:o||{}}}async sizeCheckBuildV0(t){var B;let K=t||{},{computeBudgetConfig:n,lookupTableCache:o={},lookupTableAddress:r=[]}=K,i=pe(K,["computeBudgetConfig","lookupTableCache","lookupTableAddress"]),s=M(M({},this.cluster==="devnet"?{}:kt),o),a=Array.from(new Set([...this.lookupTableAddress,...r])),u=[];for(let h of a)s[h]===void 0&&u.push(new He(h));let l=await Jt({connection:this.connection,address:u});for(let[h,w]of Object.entries(l))s[h]=w;let m=n?wt(n):{instructions:[],instructionTypes:[]},d=await Ee(this.connection,this.blockhashCommitment),p=this.signers.reduce((h,w)=>E(M({},h),{[w.publicKey.toBase58()]:w}),{}),g=[],I=[],P=[];if(this.allInstructions.forEach(h=>{let w=[...P,h],k=n?[...m.instructions,...w]:w;if(P.length<12&&je({instructions:k,payer:this.feePayer,lookupTableAddressAccount:s})||je({instructions:w,payer:this.feePayer,lookupTableAddressAccount:s}))P.push(h);else{if(P.length===0)throw Error("item ins too big");let V={};for(let L of[...new Set(a)])s[L]!==void 0&&(V[L]=s[L]);if(n&&je({instructions:[...m.instructions,...P],payer:this.feePayer,lookupTableAddressAccount:s,recentBlockhash:d})){let L=new Je({payerKey:this.feePayer,recentBlockhash:d,instructions:[...m.instructions,...P]}).compileToV0Message(Object.values(s));g.push(new $e(L))}else{let L=new Je({payerKey:this.feePayer,recentBlockhash:d,instructions:[...P]}).compileToV0Message(Object.values(s));g.push(new $e(L))}I.push(Array.from(new Set(P.map(L=>L.keys.filter(z=>z.isSigner).map(z=>z.pubkey.toString())).flat())).map(L=>p[L]).filter(L=>L!==void 0)),P=[h]}}),P.length>0){let w=[...new Set(P.map(k=>k.keys.filter(V=>V.isSigner).map(V=>V.pubkey.toString())).flat()).values()].map(k=>p[k]).filter(k=>k!==void 0);if(n&&je({instructions:[...m.instructions,...P],payer:this.feePayer,lookupTableAddressAccount:s,recentBlockhash:d})){let k=new Je({payerKey:this.feePayer,recentBlockhash:d,instructions:[...m.instructions,...P]}).compileToV0Message(Object.values(s));g.push(new $e(k))}else{let k=new Je({payerKey:this.feePayer,recentBlockhash:d,instructions:[...P]}).compileToV0Message(Object.values(s));g.push(new $e(k))}I.push(w)}return(B=this.owner)!=null&&B.signer&&I.forEach(h=>{h.some(w=>w.publicKey.equals(this.owner.publicKey))||h.push(this.owner.signer)}),{builder:this,transactions:g,buildProps:t,signers:I,instructionTypes:this.instructionTypes,execute:async h=>{var z;let{sequentially:w,onTxUpdate:k,recentBlockHash:V,skipPreflight:L=!0}=h||{};if(g.map(async(v,U)=>{I[U].length&&v.sign(I[U]),V&&(v.message.recentBlockhash=V)}),Re(g),(z=this.owner)!=null&&z.isKeyPair){if(w){let v=[];for(let U of g){let J=await this.connection.sendTransaction(U,{skipPreflight:L}),{lastValidBlockHeight:j,blockhash:ce}=await this.connection.getLatestBlockhash({commitment:this.blockhashCommitment});await this.connection.confirmTransaction({blockhash:ce,lastValidBlockHeight:j,signature:J},"confirmed"),v.push(J)}return{txIds:v,signedTxs:g}}return{txIds:await Promise.all(g.map(async v=>await this.connection.sendTransaction(v,{skipPreflight:L}))),signedTxs:g}}if(this.signAllTransactions){let v=await this.signAllTransactions(g);if(w){let U=0,J=[],j=async()=>{if(!v[U])return;let ce=await this.connection.sendTransaction(v[U],{skipPreflight:L});J.push({txId:ce,status:"sent",signedTx:v[U]}),k==null||k([...J]),U++,this.connection.onSignature(ce,Se=>{let Ne=J.findIndex(H=>H.txId===ce);Ne>-1&&(J[Ne].status=Se.err?"error":"success"),k==null||k([...J]),Se.err||j()},"processed"),this.connection.getSignatureStatus(ce)};return j(),{txIds:[],signedTxs:v}}else{let U=[];for(let J=0;J<v.length;J+=1){let j=await this.connection.sendTransaction(v[J],{skipPreflight:L});U.push(j)}return{txIds:U,signedTxs:v}}}throw new Error("please provide owner in keypair format or signAllTransactions function")},extInfo:i||{}}}};function Zt(e,t=1,n=[]){let o=[...e];if(t<=0)return n;for(;o.length;)n.push(o.splice(0,t));return n}import{PublicKey as F}from"@solana/web3.js";var eo=new F("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),to=new F("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),en=new F("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Xc=new F("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),zc=new F("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),no=new F("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),ii=new F("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Qc=new F("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),si=new F("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ai=new F("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Yc=new F("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),jc=new F("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),ui=new F("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),ci=new F("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),li=new F("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),mi=new F("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),di=new F("8yQvrjQuritLntxz6pAaWcEX6CsRMeDmr7baCLnNwEuw"),Hc=new F("E1oP2yNZXw3dFnUoPygWZPg9u2Gad87VFVPeYWqa6rD6"),Zc=new F("E1oP2yNZXw3dFnUoPygWZPg9u2Gad87VFVPeYWqa6rD6"),pi=new F("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),fi=new F("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),yi=new F("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),tt={IDO_PROGRAM_ID_V1:ui,IDO_PROGRAM_ID_V2:ci,IDO_PROGRAM_ID_V3:li,IDO_PROGRAM_ID_V4:mi};var Jc={SERUM_MARKET:F.default,OPENBOOK_MARKET:new F("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:F.default,FarmV3:new F("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new F("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new F("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new F("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new F("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new F("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),Router:new F("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:pi,CREATE_CPMM_POOL_AUTH:fi,CREATE_CPMM_POOL_FEE_ACC:yi,FEE_DESTINATION_ID:new F("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR")};import{PublicKey as tl}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as rl}from"@solana/spl-token";import al from"bn.js";var oo=(n=>(n.ALL="all",n.Strict="strict",n))(oo||{}),ro=(s=>(s.All="all",s.Standard="standard",s.Concentrated="concentrated",s.AllFarm="allFarm",s.StandardFarm="standardFarm",s.ConcentratedFarm="concentratedFarm",s))(ro||{});var Y={BASE_HOST:"https://api-v3.raydium.io",OWNER_BASE_HOST:"https://owner-v1.raydium.io",SERVICE_BASE_HOST:"https://service.raydium.io",SEND_TRANSACTION:"/send-transaction",FARM_ARP:"/main/farm/info",FARM_ARP_LINE:"/main/farm-apr-tv",CLMM_CONFIG:"/main/clmm-config",VERSION:"/main/version",CHECK_AVAILABILITY:"/v3/main/AvailabilityCheckAPI",RPCS:"/main/rpcs",INFO:"/main/info",STAKE_POOLS:"/main/stake-pools",CHAIN_TIME:"/main/chain-time",TOKEN_LIST:"/mint/list",MINT_INFO_ID:"/mint/ids",JUP_TOKEN_LIST:"https://tokens.jup.ag/tokens?tags=lst,community",POOL_LIST:"/pools/info/list",POOL_SEARCH_BY_ID:"/pools/info/ids",POOL_SEARCH_MINT:"/pools/info/mint",POOL_SEARCH_LP:"/pools/info/lps",POOL_KEY_BY_ID:"/pools/key/ids",POOL_LIQUIDITY_LINE:"/pools/line/liquidity",POOL_POSITION_LINE:"/pools/line/position",FARM_INFO:"/farms/info/ids",FARM_LP_INFO:"/farms/info/lp",FARM_KEYS:"/farms/key/ids",OWNER_CREATED_FARM:"/create-pool/{owner}",OWNER_IDO:"/main/ido/{owner}",OWNER_STAKE_FARMS:"/position/stake/{owner}",IDO_KEYS:"/ido/key/ids",SWAP_HOST:"https://transaction-v1.raydium.io",SWAP_COMPUTE:"/compute/",SWAP_TX:"/transaction/",MINT_PRICE:"/mint/price",MIGRATE_CONFIG:"/main/migrate-lp",PRIORITY_FEE:"/main/auto-fee",JITO:"https://mainnet.block-engine.jito.wtf",JITO_TRANSACTION:"/api/v1/transactions",JITO_BUNDLE:"/api/v1/bundles"},Sl=M({},Y);var io="ray_tab_hash",tn="ray_req_hash",bi=()=>{if(typeof window===void 0)return"";let e=sessionStorage.getItem(io);return e||(e=`ray-${Date.now()}`,sessionStorage.setItem(io,e)),e},Tt=async o=>{var r=o,{logCount:e=1e3,removeLastLog:t}=r,n=pe(r,["logCount","removeLastLog"]);if(typeof window===void 0)return new Promise(s=>s());let i=JSON.parse(localStorage.getItem(tn)||"[]").slice(0,e-1);t&&i.pop(),new Blob([JSON.stringify(n.data)]).size>1024&&(n.data=JSON.stringify(n.data).substring(0,200)+"..."),i.unshift(E(M({},n),{time:Date.now(),session:bi()}));try{localStorage.setItem(tn,JSON.stringify(i))}catch{if(t){let s=!1,a=JSON.stringify(n.data).substring(0,100);for(i[0].data=a+(a.length>100?"...":"");!s;){i.pop();let u=JSON.stringify(n.data).substring(0,100);i[0].data=u+(u.length>100?"...":"");try{localStorage.setItem(tn,JSON.stringify(i)),s=!0}catch{s=!1}}return new Promise(u=>u())}return Tt(E(M({},n),{logCount:e,removeLastLog:!0}))}};import{Connection as oa,PublicKey as vo}from"@solana/web3.js";import{merge as YI}from"lodash";import{createAssociatedTokenAccountInstruction as pd,TOKEN_PROGRAM_ID as fd,AccountLayout as yd,TOKEN_2022_PROGRAM_ID as bd}from"@solana/spl-token";import{PublicKey as wd,SystemProgram as Pd}from"@solana/web3.js";var nn=(...e)=>e.map(t=>{try{return typeof t=="object"?JSON.stringify(t):t}catch{return t}}).join(", "),se=class{constructor({scope:t,moduleName:n}){this.disabled=!1;this.scope=t,this.logger=_(n)}createTxBuilder(t){return this.scope.checkOwner(),new ht({connection:this.scope.connection,feePayer:t||this.scope.ownerPubKey,cluster:this.scope.cluster,owner:this.scope.owner,blockhashCommitment:this.scope.blockhashCommitment,api:this.scope.api,signAllTransactions:this.scope.signAllTransactions})}logDebug(...t){this.logger.debug(nn(t))}logInfo(...t){this.logger.info(nn(t))}logAndCreateError(...t){let n=nn(t);throw new Error(n)}checkDisabled(){(this.disabled||!this.scope)&&this.logAndCreateError("module not working")}};import{createInitializeAccountInstruction as Gm,createCloseAccountInstruction as Xm,createTransferInstruction as zm,TOKEN_PROGRAM_ID as Qm}from"@solana/spl-token";import{PublicKey as Zm,SystemProgram as $m}from"@solana/web3.js";import nd from"bn.js";import{PublicKey as Lm,Keypair as Nm}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as _m}from"@solana/spl-token";import Fm from"bn.js";import{PublicKey as Ki}from"@solana/web3.js";import lo,{isBN as mo}from"bn.js";import{bits as gi,BitStructure as _l,blob as Ai,Blob as Vl,cstr as Fl,f32 as El,f32be as Dl,f64 as Wl,f64be as ql,greedy as Ul,Layout as wi,ns64 as Gl,ns64be as Xl,nu64 as Pi,nu64be as zl,offset as Ql,s16 as Yl,s16be as jl,s24 as Hl,s24be as Zl,s32 as ki,s32be as Jl,s40 as $l,s40be as em,s48 as tm,s48be as nm,s8 as om,seq as hi,struct as rm,Structure as Ti,u16 as Ii,u16be as im,u24 as sm,u24be as am,u32 as Bi,u32be as um,u40 as cm,u40be as lm,u48 as mm,u48be as dm,u8 as xi,UInt as Si,union as pm,Union as fm,unionLayoutDiscriminator as ym,utf8 as bm}from"@solana/buffer-layout";var It=wi,so=Ti;var on=Si;var ao=xi,Pe=Ii;var rn=Bi;var uo=Pi;var ke=ki;var co=hi;var D=Ai;var sn=gi;var Le=class extends It{constructor(n,o,r){super(n,r);this.blob=D(n),this.signed=o}decode(n,o=0){let r=new lo(this.blob.decode(n,o),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(n,o,r=0){return typeof n=="number"&&(n=new lo(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),o,r)}},Bt=class extends It{constructor(n){super(8,n);this._lower=sn(rn(),!1),this._upper=sn(rn(),!1)}addBoolean(n){this._lower.fields.length<32?this._lower.addBoolean(n):this._upper.addBoolean(n)}decode(n,o=0){let r=this._lower.decode(n,o),i=this._upper.decode(n,o+this._lower.span);return M(M({},r),i)}encode(n,o,r=0){return this._lower.encode(n,o,r)+this._upper.encode(n,o,r+this._lower.span)}};function x(e){return new on(1,e)}function ae(e){return new on(4,e)}function c(e){return new Le(8,!1,e)}function O(e){return new Le(16,!1,e)}function po(e){return new Le(1,!0,e)}function St(e){return new Le(8,!0,e)}function fo(e){return new Le(16,!0,e)}var xt=class extends It{constructor(n,o,r,i){super(n.span,i);this.layout=n,this.decoder=o,this.encoder=r}decode(n,o){return this.decoder(this.layout.decode(n,o))}encode(n,o,r){return this.layout.encode(this.encoder(n),o,r)}getSpan(n,o){return this.layout.getSpan(n,o)}};function f(e){return new xt(D(32),t=>new Ki(t),t=>t.toBuffer(),e)}function he(e){return new xt(ao(),Ci,Ri,e)}function Ci(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function Ri(e){return e?1:0}var an=class extends so{decode(t,n){return super.decode(t,n)}};function T(e,t,n){return new an(e,t,n)}function S(e,t,n){let o,r=typeof t=="number"?t:mo(t)?t.toNumber():new Proxy(t,{get(i,s){if(!o){let a=Reflect.get(i,"count");o=mo(a)?a.toNumber():a,Reflect.set(i,"count",o)}return Reflect.get(i,s)},set(i,s,a){return s==="count"&&(o=a),Reflect.set(i,s,a)}});return co(e,r,n)}var un=T([f("mint"),f("owner"),c("amount"),ae("delegateOption"),f("delegate"),x("state"),ae("isNativeOption"),c("isNative"),c("delegatedAmount"),ae("closeAuthorityOption"),f("closeAuthority")]);var Wm=_("Raydium_Util");import{createAssociatedTokenAccountInstruction as uf}from"@solana/spl-token";import{PublicKey as lf,SystemProgram as mf}from"@solana/web3.js";import{PublicKey as Ao}from"@solana/web3.js";var Ni=T([x("instruction")]),Mi=T([x("instruction")]),vi=T([c("rewardState"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardLastUpdateTime"),c("totalReward"),c("totalRewardEmissioned"),c("rewardClaimed"),c("rewardPerSecond"),O("accRewardPerShare"),f("rewardVault"),f("rewardMint"),f("rewardSender"),c("rewardType"),S(c(),15,"padding")]),_i=T([c("state"),c("nonce"),f("lpVault"),f("rewardVault"),f(),f(),c(),c(),c("totalReward"),O("perShareReward"),c("lastSlot"),c("perSlotReward")]),Vi=T([c("state"),c("nonce"),f("lpVault"),f("rewardVaultA"),c("totalRewardA"),O("perShareRewardA"),c("perSlotRewardA"),x("option"),f("rewardVaultB"),D(7),c("totalRewardB"),O("perShareRewardB"),c("perSlotRewardB"),c("lastSlot"),f()]),Fi=T([c(),c("state"),c("nonce"),c("validRewardTokenNum"),O("rewardMultiplier"),c("rewardPeriodMax"),c("rewardPeriodMin"),c("rewardPeriodExtend"),f("lpMint"),f("lpVault"),S(vi,5,"rewardInfos"),f("creator"),f(),S(c(),32,"padding")]),Ei=new Proxy(_i,{get(e,t,n){return t==="decode"?(...o)=>{let r=e.decode(...o);return E(M({},r),{version:3,rewardInfos:[{rewardVault:r.rewardVault,totalReward:r.totalReward,perSlotReward:r.perSlotReward,perShareReward:r.perShareReward}]})}:Reflect.get(e,t,n)}}),Di=new Proxy(Vi,{get(e,t,n){return t==="decode"?(...o)=>{let r=e.decode(...o);return E(M({},r),{version:5,rewardInfos:[{rewardVault:r.rewardVaultA,totalReward:r.totalRewardA,perSlotReward:r.perSlotRewardA,perShareReward:r.perShareRewardA},{rewardVault:r.rewardVaultB,totalReward:r.totalRewardB,perSlotReward:r.perSlotRewardB,perShareReward:r.perShareRewardB}]})}:Reflect.get(e,t,n)}}),bo=new Proxy(Fi,{get(e,t,n){return t==="decode"?(...o)=>{let r=e.decode(...o);return E(M({},r),{version:6,rewardInfos:r.rewardInfos.map(i=>{var s;return E(M({},i),{rewardType:((s=Object.entries(nt).find(a=>String(a[1])===i.rewardType.toString()))!=null?s:["Standard SPL"])[0]})})})}:Reflect.get(e,t,n)}}),Wi=T([c("isSet"),c("rewardPerSecond"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardType")]),qi=T([x("instruction"),c("nonce"),S(Wi,5,"rewardTimeInfo")]),Ui=T([x("instruction"),c("rewardReopenTime"),c("rewardEndTime"),c("rewardPerSecond")]),Gi=T([x("instruction"),c("isSet"),c("rewardPerSecond"),c("rewardOpenTime"),c("rewardEndTime"),c("rewardType")]),Md=T([c("state"),f("id"),f("owner"),c("deposited"),S(c(),1,"rewardDebts")]),go=T([c("state"),f("id"),f("owner"),c("deposited"),S(O(),1,"rewardDebts"),c(""),c("voteLockedBalance"),S(c(),15)]),vd=T([c("state"),f("id"),f("owner"),c("deposited"),S(c(),2,"rewardDebts")]),Xi=T([c("state"),f("id"),f("owner"),c("deposited"),S(O(),2,"rewardDebts"),S(c(),17)]),zi=T([c(),c("state"),f("id"),f("owner"),c("deposited"),S(O(),5,"rewardDebts"),S(c(),16)]),Qi=T([x("instruction"),c("amount")]),Yi=T([f("mint"),f("grantAuthority"),c("baselineVoteWeightScaledFactor"),c("maxExtraLockupVoteWeightScaledFactor"),c("lockupSaturationSecs"),po("digitShift"),S(x(),7,"reserved1"),S(c(),7,"reserved2")]),ji=T([D(8),f("governanceProgramId"),f("realm"),f("realmGoverningTokenMint"),f("realmAuthority"),S(x(),32,"reserved1"),S(Yi,4,"votingMints"),St("timeOffset"),x("bump"),S(x(),7,"reserved2"),S(c(),11,"reserved3")]),Hi=T([St("startTime"),St("endTime"),x("kind"),S(x(),15,"reserved")]),Zi=T([S(Hi,1,"lockup"),c("amountDeposited_native"),c("amountInitiallyLockedNative"),he("isUsed"),he("allowClawback"),x("votingMintConfigIdx"),S(x(),29,"reserved")]),Ji=T([D(8),f("voterAuthority"),f("registrar"),S(Zi,32,"deposits"),x("voterBump"),x("voterWweightRecordBump"),S(x(),94,"reserved")]);var Ud=_("Raydium_farm_config"),$i=new Ao("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),es=new Ao("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1");var nt={"Standard SPL":0,"Option tokens":1},wo={[eo.toString()]:3,[to.toString()]:5,[en.toString()]:6};import{PublicKey as kp,SystemProgram as hp,SYSVAR_RENT_PUBKEY as Tp,SYSVAR_CLOCK_PUBKEY as Ip,TransactionInstruction as Bp}from"@solana/web3.js";import{createAssociatedTokenAccountInstruction as Kp,TOKEN_PROGRAM_ID as Cp,ASSOCIATED_TOKEN_PROGRAM_ID as Rp}from"@solana/spl-token";import Op from"bn.js";import Jd from"bn.js";var mp=_("Raydium.farm.util");var Gp=_("Raydium_farm_instruction"),Xp={voterStakeRegistryCreateVoter:Buffer.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:Buffer.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:Buffer.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:Buffer.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:Buffer.from([45,185,3,36,109,190,115,169])};import{PublicKey as EA}from"@solana/web3.js";import{AccountLayout as WA,NATIVE_MINT as qA,TOKEN_PROGRAM_ID as UA}from"@solana/spl-token";var Lf=T([ae("mintAuthorityOption"),f("mintAuthority"),c("supply"),x("decimals"),x("isInitialized"),ae("freezeAuthorityOption"),f("freezeAuthority")]);import{PublicKey as vf}from"@solana/web3.js";import{MintLayout as Vf,TOKEN_PROGRAM_ID as Ef}from"@solana/spl-token";import{TOKEN_PROGRAM_ID as ly,ASSOCIATED_TOKEN_PROGRAM_ID as my}from"@solana/spl-token";import{PublicKey as py,TransactionInstruction as fy,SystemProgram as yy,SYSVAR_RENT_PUBKEY as by}from"@solana/web3.js";var ss=T([x("instruction"),c("amountIn"),c("minAmountOut")]),as=T([x("instruction"),c("maxAmountIn"),c("amountOut")]),ty=T([x("instruction"),x("nonce")]),us=T([x("instruction"),x("nonce"),c("startTime")]),ko=T([c("status"),c("nonce"),c("maxOrder"),c("depth"),c("baseDecimal"),c("quoteDecimal"),c("state"),c("resetFlag"),c("minSize"),c("volMaxCutRatio"),c("amountWaveRatio"),c("baseLotSize"),c("quoteLotSize"),c("minPriceMultiplier"),c("maxPriceMultiplier"),c("systemDecimalValue"),c("minSeparateNumerator"),c("minSeparateDenominator"),c("tradeFeeNumerator"),c("tradeFeeDenominator"),c("pnlNumerator"),c("pnlDenominator"),c("swapFeeNumerator"),c("swapFeeDenominator"),c("baseNeedTakePnl"),c("quoteNeedTakePnl"),c("quoteTotalPnl"),c("baseTotalPnl"),c("poolOpenTime"),c("punishPcAmount"),c("punishCoinAmount"),c("orderbookToInitTime"),O("swapBaseInAmount"),O("swapQuoteOutAmount"),c("swapBase2QuoteFee"),O("swapQuoteInAmount"),O("swapBaseOutAmount"),c("swapQuote2BaseFee"),f("baseVault"),f("quoteVault"),f("baseMint"),f("quoteMint"),f("lpMint"),f("openOrders"),f("marketId"),f("marketProgramId"),f("targetOrders"),f("withdrawQueue"),f("lpVault"),f("owner"),c("lpReserve"),S(c(),3,"padding")]),ny=T([c("accountType"),c("status"),c("nonce"),c("maxOrder"),c("depth"),c("baseDecimal"),c("quoteDecimal"),c("state"),c("resetFlag"),c("minSize"),c("volMaxCutRatio"),c("amountWaveRatio"),c("baseLotSize"),c("quoteLotSize"),c("minPriceMultiplier"),c("maxPriceMultiplier"),c("systemDecimalsValue"),c("abortTradeFactor"),c("priceTickMultiplier"),c("priceTick"),c("minSeparateNumerator"),c("minSeparateDenominator"),c("tradeFeeNumerator"),c("tradeFeeDenominator"),c("pnlNumerator"),c("pnlDenominator"),c("swapFeeNumerator"),c("swapFeeDenominator"),c("baseNeedTakePnl"),c("quoteNeedTakePnl"),c("quoteTotalPnl"),c("baseTotalPnl"),c("poolOpenTime"),c("punishPcAmount"),c("punishCoinAmount"),c("orderbookToInitTime"),O("swapBaseInAmount"),O("swapQuoteOutAmount"),O("swapQuoteInAmount"),O("swapBaseOutAmount"),c("swapQuote2BaseFee"),c("swapBase2QuoteFee"),f("baseVault"),f("quoteVault"),f("baseMint"),f("quoteMint"),f("lpMint"),f("modelDataAccount"),f("openOrders"),f("marketId"),f("marketProgramId"),f("targetOrders"),f("owner"),S(c(),64,"padding")]),cs=T([x("instruction"),c("baseAmountIn"),c("quoteAmountIn"),c("fixedSide")]),ls=T([x("instruction"),c("amountIn")]);var ms=T([c("fee")]);import{PublicKey as ds}from"@solana/web3.js";var ps=new ds("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),fs=5e4,ys=T([c("x"),c("y"),c("price")]),ay=T([c("accountType"),c("status"),c("multiplier"),c("validDataCount"),S(ys,fs,"DataElement")]);var By=_("Raydium_liquidity_instruction");import{TOKEN_PROGRAM_ID as Bg,TOKEN_2022_PROGRAM_ID as xg,ASSOCIATED_TOKEN_PROGRAM_ID as Sg}from"@solana/spl-token";import{PublicKey as Cg,TransactionInstruction as Rg,SystemProgram as Lg,Keypair as Ng}from"@solana/web3.js";import _g from"bn.js";import ag from"bn.js";var Oy=Buffer.from("amm_config","utf8"),Ny=Buffer.from("pool","utf8"),My=Buffer.from("pool_vault","utf8"),vy=Buffer.from("pool_reward_vault","utf8"),_y=Buffer.from("position","utf8"),Vy=Buffer.from("tick_array","utf8"),Fy=Buffer.from("operation","utf8"),Ey=Buffer.from("pool_tick_array_bitmap_extension","utf8");import ue from"bn.js";var ho=new ue(0),cn=new ue(1),To=new ue(-1),Rt=new ue(1).shln(64),Io=new ue(1).shln(128),bs=Rt.sub(cn);var gs=Io.subn(1),We=-443636,rt=-We,Lt=new ue("4295048016"),Ot=new ue("79226673521066979257578248091"),As=new ue("4295048017"),ws=new ue("79226673521066979257578248090");var Ps=new ue(10).pow(new ue(6));var qy=new ue("18446744073700000000");import Qb from"bn.js";import{PublicKey as wb}from"@solana/web3.js";import Tb from"bn.js";var mn=14;import cb from"bn.js";import{TOKEN_2022_PROGRAM_ID as Fb}from"@solana/spl-token";var Mt=60;var Is=T([D(8),x("bump"),Pe("index"),f(""),ae("protocolFeeRate"),ae("tradeFeeRate"),Pe("tickSpacing"),S(c(),8,"")]),Bs=T([ae("blockTimestamp"),O("sqrtPriceX64"),O("cumulativeTimePriceX64"),S(O(),1,"")]),xs=T([D(8),he("initialized"),f("poolId"),S(Bs,1e3,"observations"),S(O(),5,"")]),Ss=T([x("rewardState"),c("openTime"),c("endTime"),c("lastUpdateTime"),O("emissionsPerSecondX64"),c("rewardTotalEmissioned"),c("rewardClaimed"),f("tokenMint"),f("tokenVault"),f("creator"),O("rewardGrowthGlobalX64")]),yn=T([D(8),x("bump"),f("ammConfig"),f("creator"),f("mintA"),f("mintB"),f("vaultA"),f("vaultB"),f("observationId"),x("mintDecimalsA"),x("mintDecimalsB"),Pe("tickSpacing"),O("liquidity"),O("sqrtPriceX64"),ke("tickCurrent"),Pe("observationIndex"),Pe("observationUpdateDuration"),O("feeGrowthGlobalX64A"),O("feeGrowthGlobalX64B"),c("protocolFeesTokenA"),c("protocolFeesTokenB"),O("swapInAmountTokenA"),O("swapOutAmountTokenB"),O("swapInAmountTokenB"),O("swapOutAmountTokenA"),x("status"),S(x(),7,""),S(Ss,3,"rewardInfos"),S(c(),16,"tickArrayBitmap"),c("totalFeesTokenA"),c("totalFeesClaimedTokenA"),c("totalFeesTokenB"),c("totalFeesClaimedTokenB"),c("fundFeesTokenA"),c("fundFeesTokenB"),c("startTime"),S(c(),15*4-3,"padding")]),Ks=T([O("growthInsideLastX64"),c("rewardAmountOwed")]),Co=T([D(8),x("bump"),f("nftMint"),f("poolId"),ke("tickLower"),ke("tickUpper"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),c("tokenFeesOwedA"),c("tokenFeesOwedB"),S(Ks,3,"rewardInfos"),S(c(),8,"")]),gg=T([D(8),x("bump"),f("poolId"),ke("tickLowerIndex"),ke("tickUpperIndex"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),c("tokenFeesOwedA"),c("tokenFeesOwedB"),S(O(),3,"rewardGrowthInside"),S(c(),8,"")]),Cs=T([ke("tick"),fo("liquidityNet"),O("liquidityGross"),O("feeGrowthOutsideX64A"),O("feeGrowthOutsideX64B"),S(O(),3,"rewardGrowthsOutsideX64"),S(ae(),13,"")]),Bo=T([D(8),f("poolId"),ke("startTickIndex"),S(Cs,Mt,"ticks"),x("initializedTickCount"),S(x(),115,"")]),Rs=T([D(329),S(f(),100,"whitelistMints")]),Ts=T([D(8),f("poolId"),S(S(c(),8),mn,"positiveTickArrayBitmap"),S(S(c(),8),mn,"negativeTickArrayBitmap")]);var Xg=_("Raydium_Clmm");import{PublicKey as cA}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as mA}from"@solana/spl-token";import{PublicKey as Zg}from"@solana/web3.js";import Ro from"bn.js";var Os=new Ro(25),Ns=new Ro(1e4);var eA=_("Raydium_liquidity_serum");import AA from"bn.js";import uw from"bn.js";import{PublicKey as yw}from"@solana/web3.js";import Ow from"bn.js";import{AccountLayout as Mw,TOKEN_PROGRAM_ID as vw}from"@solana/spl-token";import{PublicKey as YP}from"@solana/web3.js";import{NATIVE_MINT as HP,TOKEN_PROGRAM_ID as ZP,AccountLayout as JP}from"@solana/spl-token";import Ds from"bn.js";var oP=new Ds(1e6);import Ws from"bn.js";var cP=new Ws(0);import{PublicKey as AP}from"@solana/web3.js";var PP=Buffer.from("vault_and_lp_mint_auth_seed","utf8"),kP=Buffer.from("amm_config","utf8"),hP=Buffer.from("pool","utf8"),TP=Buffer.from("pool_lp_mint","utf8"),IP=Buffer.from("pool_vault","utf8"),BP=Buffer.from("observation","utf8");import{TransactionInstruction as RP}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as OP,TOKEN_2022_PROGRAM_ID as NP,ASSOCIATED_TOKEN_PROGRAM_ID as MP}from"@solana/spl-token";var VP=_("Raydium_cpmm");import dk from"bn.js";var qs=T([D(8),x("bump"),he("disableCreatePool"),Pe("index"),c("tradeFeeRate"),c("protocolFeeRate"),c("fundFeeRate"),c("createPoolFee"),f("protocolOwner"),f("fundOwner"),S(c(),16)]),_t=T([D(8),f("configId"),f("poolCreator"),f("vaultA"),f("vaultB"),f("mintLp"),f("mintA"),f("mintB"),f("mintProgramA"),f("mintProgramB"),f("observationId"),x("bump"),x("status"),x("lpDecimals"),x("mintDecimalA"),x("mintDecimalB"),c("lpAmount"),c("protocolFeesMintA"),c("protocolFeesMintB"),c("fundFeesMintA"),c("fundFeesMintB"),S(c(),32)]);import{PublicKey as Ih}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Sh,TOKEN_2022_PROGRAM_ID as Kh,createTransferInstruction as Ch}from"@solana/spl-token";import Qs from"bn.js";import{TOKEN_PROGRAM_ID as _k,TOKEN_2022_PROGRAM_ID as Vk,ASSOCIATED_TOKEN_PROGRAM_ID as Fk}from"@solana/spl-token";import{PublicKey as Dk,TransactionInstruction as Wk,SystemProgram as qk}from"@solana/web3.js";import Gk from"bn.js";var Xs={[no.toBase58()]:3};var zs=T([D(5),D(8),f("ownAddress"),c("vaultSignerNonce"),f("baseMint"),f("quoteMint"),f("baseVault"),c("baseDepositsTotal"),c("baseFeesAccrued"),f("quoteVault"),c("quoteDepositsTotal"),c("quoteFeesAccrued"),c("quoteDustThreshold"),f("requestQueue"),f("eventQueue"),f("bids"),f("asks"),c("baseLotSize"),c("quoteLotSize"),c("feeRateBps"),c("referrerRebatesAccrued"),D(7)]);import{PublicKey as ah}from"@solana/web3.js";var dh=_("Serum");var Jh=new Qs(0);import{TOKEN_PROGRAM_ID as Ys}from"@solana/spl-token";import{PublicKey as js,Transaction as An,TransactionInstruction as Hs}from"@solana/web3.js";import No from"bn.js";var te=class extends se{static getPdaPoolId(t,n){return we([te.SEED_CONFIG.pool.id,n.toBuffer()],t)}static getPdaOwnerId(t,n,o,r){return we([te.SEED_CONFIG.owner.id,n.toBuffer(),o.toBuffer(),Buffer.from(new No(r).toArray())],t)}static async getAllInfo({connection:t,programId:n,poolIds:o,wallet:r,chainTime:i}){if(o.length===0)return[];let s=o.map(m=>te.getPdaPoolId(n,m).publicKey),a=[];for(let m=0;m<te.VERSION_PROJECT.length;m++)a.push(...s.map(d=>te.getPdaOwnerId(n,d,r,m).publicKey));let u=await De(t,[...s,...a]),l=[];for(let m=0;m<u.length;m++){let d=Math.floor(m/o.length),p=m%o.length,g=s[p],I=a[m],P=u[p],K=u[o.length+m];if(!(P&&K)||P.data.length!==te.POOL_LAYOUT.span||K.data.length!==te.OWNER_LAYOUT.span)continue;let B=te.POOL_LAYOUT.decode(P.data),h=te.OWNER_LAYOUT.decode(K.data),w=B.openTime.toNumber(),k=B.endTime.toNumber(),V=h.tokenInfo.map(v=>v.debtAmount.gt(new No(0))).filter(v=>!v).length!==3,L=i>w&&i<k&&B.status===1,z=V&&L;l.push({programId:n,poolId:g,ammId:B.ammId,ownerAccountId:I,snapshotLpAmount:h.lpAmount,project:te.VERSION_PROJECT[d],openTime:w,endTime:k,canClaim:z,canClaimErrorType:V?L?void 0:"outOfOperationalTime":"alreadyClaimIt",tokenInfo:B.tokenInfo.map((v,U)=>({mintAddress:v.mintAddress,mintVault:v.mintVault,mintDecimals:v.mintDecimals,perLpLoss:v.perLpLoss,debtAmount:h.tokenInfo[U].debtAmount.add(h.tokenInfo[U].claimedAmount)}))})}return l}async makeClaimTransaction({poolInfo:t,ownerInfo:n}){n.wallet||this.scope.checkOwner();let o=this.createTxBuilder(),r=n.wallet||this.scope.ownerPubKey,i=[];for(let u of t.tokenInfo){let{account:l,instructionParams:m}=await this.scope.account.getOrCreateTokenAccount({mint:u.mintAddress,owner:this.scope.ownerPubKey,notUseTokenAccount:u.mintAddress.equals(ee.WSOL.mint),createInfo:{payer:r,amount:0},skipCloseAccount:!u.mintAddress.equals(ee.WSOL.mint),associatedOnly:u.mintAddress.equals(ee.WSOL.mint)?!1:n.associatedOnly});m&&o.addInstruction(m),i.push(l)}o.addInstruction({instructions:[te.makeClaimInstruction({programId:t.programId,poolInfo:t,ownerInfo:{wallet:r,ownerPda:t.ownerAccountId,claimAddress:i}})]});let{transaction:s,signers:a}=o.build();return[{transaction:s,signer:a}]}async makeClaimAllTransaction({poolInfos:t,ownerInfo:n}){let o=this.createTxBuilder(),r=n.wallet||this.scope.ownerPubKey,i={};for(let l of t){let m=[];for(let d of l.tokenInfo){let{account:p,instructionParams:g}=await this.scope.account.getOrCreateTokenAccount({mint:d.mintAddress,owner:this.scope.ownerPubKey,notUseTokenAccount:d.mintAddress.equals(ee.WSOL.mint),createInfo:{payer:r,amount:0},skipCloseAccount:!d.mintAddress.equals(ee.WSOL.mint),associatedOnly:d.mintAddress.equals(ee.WSOL.mint)?!1:n.associatedOnly});g&&o.addInstruction(g),p&&(i[d.mintAddress.toString()]=p,m.push(p))}o.addInstruction({instructions:[te.makeClaimInstruction({programId:l.programId,poolInfo:l,ownerInfo:{wallet:r,ownerPda:l.ownerAccountId,claimAddress:m}})]})}let{transaction:s,signers:a}=o.build(),u=o.allInstructions;return jt(u,[r,...a.map(l=>l.publicKey)])?[{transaction:s,signer:a}]:[{transaction:new An().add(...u.slice(0,o.AllTxData.instructions.length-1)),signer:a},{transaction:new An().add(...u.slice(o.AllTxData.instructions.length-1)),signer:[]},{transaction:new An().add(...o.AllTxData.endInstructions),signer:[]}]}static makeClaimInstruction({programId:t,poolInfo:n,ownerInfo:o}){let r=T([]),i=[{pubkey:o.wallet,isSigner:!0,isWritable:!0},{pubkey:n.poolId,isSigner:!1,isWritable:!0},{pubkey:o.ownerPda,isSigner:!1,isWritable:!0},...o.claimAddress.map(u=>({pubkey:u,isSigner:!1,isWritable:!0})),...n.tokenInfo.map(({mintVault:u})=>({pubkey:u,isSigner:!1,isWritable:!0})),{pubkey:Ys,isSigner:!1,isWritable:!1}],s=Buffer.alloc(r.span);r.encode({},s);let a=Buffer.from([10,66,208,184,161,6,191,98,...s]);return new Hs({keys:i,programId:t,data:a})}},de=te;de.CLAIMED_NUM=3,de.POOL_LAYOUT=T([D(8),x("bump"),x("status"),c("openTime"),c("endTime"),f("ammId"),S(T([x("mintDecimals"),f("mintAddress"),f("mintVault"),c("perLpLoss"),c("totalClaimedAmount")]),te.CLAIMED_NUM,"tokenInfo"),S(c(),10,"padding")]),de.OWNER_LAYOUT=T([D(8),x("bump"),x("version"),f("poolId"),f("owner"),c("lpAmount"),S(T([f("mintAddress"),c("debtAmount"),c("claimedAmount")]),te.CLAIMED_NUM,"tokenInfo"),S(c(),4,"padding")]),de.DEFAULT_POOL_ID=["58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2","6UmmUiYoBjSrhakAobJw8BvkmJtDVxaeBtbt7rxWo1mg","AVs9TA4nWDzfPJE9gGVNJMVhcQy3V9PGazuz33BfG2RA","DVa7Qmb5ct9RCpaU7UTpSaf3GVMYz17vNVU67XpdCRut","7XawhbbxtsRcQA8KTkHT9f9nc6d69UwqCDh6U5EEbEmX","6a1CsrpeZubDjEJE9s1CMVheB6HWM5d7m1cj2jkhyXhj","EoNrn8iUhwgJySD1pHu8Qxm5gSQqLK3za4m8xzD2RuEb","AceAyRTWt4PyB2pHqf2qhDgNZDtKVNaxgL8Ru3V4aN1P","6tmFJbMk5yVHFcFy7X2K8RwHjKLr6KVFLYXpgpBNeAxB"].map(t=>new js(t)),de.SEED_CONFIG={pool:{id:Buffer.from("pool_seed","utf8")},owner:{id:Buffer.from("user_claim_seed","utf8")}},de.VERSION_PROJECT=[void 0,"Francium","Tulip","Larix"];import{PublicKey as MT}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as _T}from"@solana/spl-token";import FT from"bn.js";import{TransactionInstruction as bT,SYSVAR_RENT_PUBKEY as gT}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as wT}from"@solana/spl-token";import{createInitializeAccountInstruction as kT}from"@solana/spl-token";import{SystemProgram as xT,Transaction as ST}from"@solana/web3.js";function Zs(e="accountFlags"){let t=new Bt(e);return t.addBoolean("initialized"),t.addBoolean("market"),t.addBoolean("openOrders"),t.addBoolean("requestQueue"),t.addBoolean("eventQueue"),t.addBoolean("bids"),t.addBoolean("asks"),t}var Js=T([D(5),Zs("accountFlags"),f("ownAddress"),c("vaultSignerNonce"),f("baseMint"),f("quoteMint"),f("baseVault"),c("baseDepositsTotal"),c("baseFeesAccrued"),f("quoteVault"),c("quoteDepositsTotal"),c("quoteFeesAccrued"),c("quoteDustThreshold"),f("requestQueue"),f("eventQueue"),f("bids"),f("asks"),c("baseLotSize"),c("quoteLotSize"),c("feeRateBps"),c("referrerRebatesAccrued"),D(7)]);import{PublicKey as lI}from"@solana/web3.js";import{TransactionInstruction as eI,SYSVAR_CLOCK_PUBKEY as tI}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as oI}from"@solana/spl-token";var ea=T([x("instruction"),uo("amount")]),ta=T([x("instruction")]);import gI from"bn.js";var AI={[tt.IDO_PROGRAM_ID_V1.toString()]:1,[tt.IDO_PROGRAM_ID_V2.toString()]:2,[tt.IDO_PROGRAM_ID_V3.toString()]:3,[tt.IDO_PROGRAM_ID_V4.toString()]:4};import{PublicKey as SI}from"@solana/web3.js";import{MintLayout as CI,TOKEN_2022_PROGRAM_ID as RI,TOKEN_PROGRAM_ID as LI}from"@solana/spl-token";var qe=_("Raydium_Api"),_o=new Map;async function bx(e,t,n=1e3){let o;for(;o==null;)try{qe.debug(`Request ${e} through endlessRetry`),o=await t()}catch(r){qe.error(`Request ${e} failed, retry after ${n} ms`,r),await zn(n)}return o}var wn=class{constructor({cluster:t,timeout:n,logRequests:o,logCount:r,urlConfigs:i}){this.cluster=t,this.urlConfigs=i||{},this.logCount=r||1e3,this.api=Mo.create({baseURL:this.urlConfigs.BASE_HOST||Y.BASE_HOST,timeout:n}),this.api.interceptors.request.use(s=>{let{method:a,baseURL:u,url:l}=s;return qe.debug(`${a==null?void 0:a.toUpperCase()} ${u}${l}`),s},s=>(qe.error("Request failed"),Promise.reject(s))),this.api.interceptors.response.use(s=>{let{config:a,data:u,status:l}=s,{method:m,baseURL:d,url:p}=a;return o&&Tt({status:l,url:`${d}${p}`,params:a.params,data:u,logCount:this.logCount}),qe.debug(`${m==null?void 0:m.toUpperCase()} ${d}${p}  ${l}`),u},s=>{let{config:a,response:u={}}=s,{status:l}=u,{method:m,baseURL:d,url:p}=a;return o&&Tt({status:l,url:`${d}${p}`,params:a.params,data:s.message,logCount:this.logCount}),qe.error(`${m.toUpperCase()} ${d}${p} ${l||s.message}`),Promise.reject(s)})}async getClmmConfigs(){return(await this.api.get(this.urlConfigs.CLMM_CONFIG||Y.CLMM_CONFIG)).data}async getClmmPoolLines(t){return(await this.api.get(`${this.urlConfigs.POOL_LIQUIDITY_LINE||Y.POOL_LIQUIDITY_LINE}?pool_id=${t}`)).data}async getBlockSlotCountForSecond(t){if(!t)return 2;let o=(await Mo.post(t,{id:"getRecentPerformanceSamples",jsonrpc:"2.0",method:"getRecentPerformanceSamples",params:[4]})).result.map(r=>r.numSlots);return o.reduce((r,i)=>r+i,0)/o.length/60}async getChainTimeOffset(){return(await this.api.get(this.urlConfigs.CHAIN_TIME||Y.CHAIN_TIME)).data}async getRpcs(){return this.api.get(this.urlConfigs.RPCS||Y.RPCS)}async getTokenList(){return(await this.api.get(this.urlConfigs.TOKEN_LIST||Y.TOKEN_LIST)).data}async getJupTokenList(){return this.api.get("",{baseURL:this.urlConfigs.JUP_TOKEN_LIST||Y.JUP_TOKEN_LIST})}async getTokenInfo(t){return(await this.api.get((this.urlConfigs.MINT_INFO_ID||Y.MINT_INFO_ID)+`?mints=${t.map(o=>o.toString()).join(",")}`)).data}async getPoolList(t={}){let{type:n="all",sort:o="liquidity",order:r="desc",page:i=0,pageSize:s=100}=t;return(await this.api.get((this.urlConfigs.POOL_LIST||Y.POOL_LIST)+`?poolType=${n}&poolSortField=${o}&sortType=${r}&page=${i}&pageSize=${s}`)).data}async fetchPoolById(t){let{ids:n}=t;return(await this.api.get((this.urlConfigs.POOL_SEARCH_BY_ID||Y.POOL_SEARCH_BY_ID)+`?ids=${n}`)).data}async fetchPoolKeysById(t){let{idList:n}=t,o=[],r=n.filter(u=>_o.has(u)?(o.push(_o.get(u)),!1):!0),i=[],a=(await new oa("https://rpc.ironforge.network/mainnet?apiKey=").getProgramAccounts(new vo("8yQvrjQuritLntxz6pAaWcEX6CsRMeDmr7baCLnNwEuw"),{encoding:"base64",filters:[{dataSize:637}]})).filter(u=>u.pubkey.toString()!=="AJBTtXxDzoUtZrEPS7ZR5H18gYpLK4r9BH4AxCWD7v1y");for(let u of a){let l=_t.decode(u.account.data);i.push({programId:new vo("8yQvrjQuritLntxz6pAaWcEX6CsRMeDmr7baCLnNwEuw").toString(),id:u.pubkey.toString(),mintA:{address:l.mintA.toString(),decimals:l.mintDecimalA,symbol:"",name:"",logoURI:"",tags:[],extensions:{},chainId:101,programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},mintB:{address:l.mintB.toString(),decimals:l.mintDecimalB,symbol:"",name:"",logoURI:"",tags:[],extensions:{},chainId:101,programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},vault:{A:l.vaultA.toString(),B:l.vaultB.toString()},authority:"E1oP2yNZXw3dFnUoPygWZPg9u2Gad87VFVPeYWqa6rD6",mintLp:{address:l.mintLp.toString(),decimals:9,symbol:"",name:"",logoURI:"",tags:[],extensions:{},chainId:101,programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},config:{id:"AJBTtXxDzoUtZrEPS7ZR5H18gYpLK4r9BH4AxCWD7v1y",index:0,protocolFeeRate:12e4/1e6,tradeFeeRate:4e4/1e6,fundFeeRate:4e4/1e6,createPoolFee:"0"}})}return o.concat(i)}async fetchPoolByMints(t){let{mint1:n,mint2:o,type:r="all",sort:i="default",order:s="desc",page:a=1}=t,[u,l]=[n&&Ce(n).toBase58(),o&&o!=="undefined"?Ce(o).toBase58():""],[m,d]=l&&u>l?[l,u]:[u,l];return(await this.api.get((this.urlConfigs.POOL_SEARCH_MINT||Y.POOL_SEARCH_MINT)+`?mint1=${m}&mint2=${d}&poolType=${r}&poolSortField=${i}&sortType=${s}&pageSize=100&page=${a}`)).data}async fetchFarmInfoById(t){let{ids:n}=t;return(await this.api.get((this.urlConfigs.FARM_INFO||Y.FARM_INFO)+`?ids=${n}`)).data}async fetchFarmKeysById(t){let{ids:n}=t;return(await this.api.get((this.urlConfigs.FARM_KEYS||Y.FARM_KEYS)+`?ids=${n}`)).data}async fetchAvailabilityStatus(){return(await this.api.get(this.urlConfigs.CHECK_AVAILABILITY||Y.CHECK_AVAILABILITY)).data}async sendTxToJito(t,n){let o=n?this.urlConfigs.JITO_BUNDLE||Y.JITO_BUNDLE:this.urlConfigs.JITO_TRANSACTION||Y.JITO_TRANSACTION;return(await this.api.post(o,{jsonrpc:"2.0",id:1,method:n?"sendBundle":"sendTransaction",params:t},{baseURL:this.urlConfigs.JITO||Y.JITO})).data}};export{Y as API_URLS,wn as Api,Sl as DEV_API_URLS,oo as JupTokenType,ro as PoolFetchType,io as SESSION_KEY,tn as STORAGE_KEY,bx as endlessRetry,bi as getSessionKey,Tt as updateReqHistory};
//# sourceMappingURL=index.mjs.map