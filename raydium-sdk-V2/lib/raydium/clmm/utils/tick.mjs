var wn=Object.defineProperty,yn=Object.defineProperties;var Tn=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var xn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable;var Lt=(n,e,t)=>e in n?wn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,te=(n,e)=>{for(var t in e||(e={}))xn.call(e,t)&&Lt(n,t,e[t]);if(Et)for(var t of Et(e))An.call(e,t)&&Lt(n,t,e[t]);return n},ue=(n,e)=>yn(n,Tn(e));import li from"bn.js";var Ae=9e15,ge=1e9,tt="0123456789abcdef",Ke="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",qe="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",nt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ae,maxE:Ae,crypto:!1},_t,ce,w=!0,Ve="[DecimalError] ",pe=Ve+"Invalid argument: ",Ot=Ve+"Precision limit exceeded",Dt=Ve+"crypto unavailable",vt="[object Decimal]",U=Math.floor,_=Math.pow,kn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Pn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Bn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,re=1e7,h=7,In=9007199254740991,Nn=Ke.length-1,rt=qe.length-1,f={toStringTag:vt};f.absoluteValue=f.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),g(n)};f.ceil=function(){return g(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(pe+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};f.comparedTo=f.cmp=function(n){var e,t,r,i,o=this,s=o.d,a=(n=new o.constructor(n)).d,c=o.s,u=n.s;if(!s||!a)return!c||!u?NaN:c!==u?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==n.e)return o.e>n.e^c<0?1:-1;for(r=s.length,i=a.length,e=0,t=r<i?r:i;e<t;++e)if(s[e]!==a[e])return s[e]>a[e]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};f.cosine=f.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+h,r.rounding=1,t=Sn(r,Wt(r,t)),r.precision=n,r.rounding=e,g(ce==2||ce==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};f.cubeRoot=f.cbrt=function(){var n,e,t,r,i,o,s,a,c,u,m=this,l=m.constructor;if(!m.isFinite()||m.isZero())return new l(m);for(w=!1,o=m.s*_(m.s*m,1/3),!o||Math.abs(o)==1/0?(t=K(m.d),n=m.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=_(t,1/3),n=U((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new l(t),r.s=m.s):r=new l(o.toString()),s=(n=l.precision)+3;;)if(a=r,c=a.times(a).times(a),u=c.plus(m),r=B(u.plus(m).times(a),u.plus(c),s+2,1),K(a.d).slice(0,s)===(t=K(r.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!i&&t=="4999"){if(!i&&(g(a,n+1,0),a.times(a).times(a).eq(m))){r=a;break}s+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(g(r,n+1,1),e=!r.times(r).times(r).eq(m));break}return w=!0,g(r,n,l.rounding,e)};f.decimalPlaces=f.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-U(this.e/h))*h,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};f.dividedBy=f.div=function(n){return B(this,new this.constructor(n))};f.dividedToIntegerBy=f.divToInt=function(n){var e=this,t=e.constructor;return g(B(e,new t(n),0,1,1),t.precision,t.rounding)};f.equals=f.eq=function(n){return this.cmp(n)===0};f.floor=function(){return g(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(n){return this.cmp(n)>0};f.greaterThanOrEqualTo=f.gte=function(n){var e=this.cmp(n);return e==1||e===0};f.hyperbolicCosine=f.cosh=function(){var n,e,t,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;t=s.precision,r=s.rounding,s.precision=t+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(n=Math.ceil(i/3),e=(1/We(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=ke(s,1,o.times(e),new s(1),!0);for(var c,u=n,m=new s(8);u--;)c=o.times(o),o=a.minus(c.times(m.minus(c.times(m))));return g(o,s.precision=t,s.rounding=r,!0)};f.hyperbolicSine=f.sinh=function(){var n,e,t,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=ke(o,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/We(5,n)),i=ke(o,2,i,i,!0);for(var s,a=new o(5),c=new o(16),u=new o(20);n--;)s=i.times(i),i=i.times(a.plus(s.times(c.times(s).plus(u))))}return o.precision=e,o.rounding=t,g(i,e,t,!0)};f.hyperbolicTangent=f.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,B(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};f.inverseCosine=f.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,o=t.rounding;return r!==-1?r===0?e.isNeg()?ne(t,i,o):new t(0):new t(NaN):e.isZero()?ne(t,i+4,o).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=ne(t,i+4,o).times(.5),t.precision=i,t.rounding=o,n.minus(e))};f.inverseHyperbolicCosine=f.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,w=!1,t=t.times(t).minus(1).sqrt().plus(t),w=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};f.inverseHyperbolicSine=f.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,w=!1,t=t.times(t).plus(1).sqrt().plus(t),w=!0,r.precision=n,r.rounding=e,t.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var n,e,t,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=o.precision,e=o.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?g(new o(i),n,e,!0):(o.precision=t=r-i.e,i=B(i.plus(1),new o(1).minus(i),t+n,1),o.precision=n+4,o.rounding=1,i=i.ln(),o.precision=n,o.rounding=e,i.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var n,e,t,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),t=o.precision,r=o.rounding,e!==-1?e===0?(n=ne(o,t+4,r).times(.5),n.s=i.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=r,i.times(2)))};f.inverseTangent=f.atan=function(){var n,e,t,r,i,o,s,a,c,u=this,m=u.constructor,l=m.precision,d=m.rounding;if(u.isFinite()){if(u.isZero())return new m(u);if(u.abs().eq(1)&&l+4<=rt)return s=ne(m,l+4,d).times(.25),s.s=u.s,s}else{if(!u.s)return new m(NaN);if(l+4<=rt)return s=ne(m,l+4,d).times(.5),s.s=u.s,s}for(m.precision=a=l+10,m.rounding=1,t=Math.min(28,a/h+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(w=!1,e=Math.ceil(a/h),r=1,c=u.times(u),s=new m(u),i=u;n!==-1;)if(i=i.times(c),o=s.minus(i.div(r+=2)),i=i.times(c),s=o.plus(i.div(r+=2)),s.d[e]!==void 0)for(n=e;s.d[n]===o.d[n]&&n--;);return t&&(s=s.times(2<<t-1)),w=!0,g(s,m.precision=l,m.rounding=d,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&U(this.e/h)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(n){return this.cmp(n)<0};f.lessThanOrEqualTo=f.lte=function(n){return this.cmp(n)<1};f.logarithm=f.log=function(n){var e,t,r,i,o,s,a,c,u=this,m=u.constructor,l=m.precision,d=m.rounding,p=5;if(n==null)n=new m(10),e=!0;else{if(n=new m(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new m(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new m(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(i=t[0];i%10===0;)i/=10;o=i!==1}if(w=!1,a=l+p,s=fe(u,a),r=e?Ge(m,a+10):fe(n,a),c=B(s,r,a,1),Ne(c.d,i=l,d))do if(a+=10,s=fe(u,a),r=e?Ge(m,a+10):fe(n,a),c=B(s,r,a,1),!o){+K(c.d).slice(i+1,i+15)+1==1e14&&(c=g(c,l+1,0));break}while(Ne(c.d,i+=10,d));return w=!0,g(c,l,d)};f.minus=f.sub=function(n){var e,t,r,i,o,s,a,c,u,m,l,d,p=this,y=p.constructor;if(n=new y(n),!p.d||!n.d)return!p.s||!n.s?n=new y(NaN):p.d?n.s=-n.s:n=new y(n.d||p.s!==n.s?p:NaN),n;if(p.s!=n.s)return n.s=-n.s,p.plus(n);if(u=p.d,d=n.d,a=y.precision,c=y.rounding,!u[0]||!d[0]){if(d[0])n.s=-n.s;else if(u[0])n=new y(p);else return new y(c===3?-0:0);return w?g(n,a,c):n}if(t=U(n.e/h),m=U(p.e/h),u=u.slice(),o=m-t,o){for(l=o<0,l?(e=u,o=-o,s=d.length):(e=d,t=m,s=u.length),r=Math.max(Math.ceil(a/h),s)+2,o>r&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for(r=u.length,s=d.length,l=r<s,l&&(s=r),r=0;r<s;r++)if(u[r]!=d[r]){l=u[r]<d[r];break}o=0}for(l&&(e=u,u=d,d=e,n.s=-n.s),s=u.length,r=d.length-s;r>0;--r)u[s++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=re-1;--u[i],u[r]+=re}u[r]-=d[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=Ue(u,t),w?g(n,a,c):n):new y(c===3?-0:0)};f.modulo=f.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?g(new r(t),r.precision,r.rounding):(w=!1,r.modulo==9?(e=B(t,n.abs(),0,3,1),e.s*=n.s):e=B(t,n,0,r.modulo,1),e=e.times(n),w=!0,t.minus(e))};f.naturalExponential=f.exp=function(){return it(this)};f.naturalLogarithm=f.ln=function(){return fe(this)};f.negated=f.neg=function(){var n=new this.constructor(this);return n.s=-n.s,g(n)};f.plus=f.add=function(n){var e,t,r,i,o,s,a,c,u,m,l=this,d=l.constructor;if(n=new d(n),!l.d||!n.d)return!l.s||!n.s?n=new d(NaN):l.d||(n=new d(n.d||l.s===n.s?l:NaN)),n;if(l.s!=n.s)return n.s=-n.s,l.minus(n);if(u=l.d,m=n.d,a=d.precision,c=d.rounding,!u[0]||!m[0])return m[0]||(n=new d(l)),w?g(n,a,c):n;if(o=U(l.e/h),r=U(n.e/h),u=u.slice(),i=o-r,i){for(i<0?(t=u,i=-i,s=m.length):(t=m,r=o,s=u.length),o=Math.ceil(a/h),s=o>s?o+1:s+1,i>s&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(s=u.length,i=m.length,s-i<0&&(i=s,t=m,m=u,u=t),e=0;i;)e=(u[--i]=u[i]+m[i]+e)/re|0,u[i]%=re;for(e&&(u.unshift(e),++r),s=u.length;u[--s]==0;)u.pop();return n.d=u,n.e=Ue(u,r),w?g(n,a,c):n};f.precision=f.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(pe+n);return t.d?(e=qt(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};f.round=function(){var n=this,e=n.constructor;return g(new e(n),n.e+1,e.rounding)};f.sine=f.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+h,r.rounding=1,t=En(r,Wt(r,t)),r.precision=n,r.rounding=e,g(ce>2?t.neg():t,n,e,!0)):new r(NaN)};f.squareRoot=f.sqrt=function(){var n,e,t,r,i,o,s=this,a=s.d,c=s.e,u=s.s,m=s.constructor;if(u!==1||!a||!a[0])return new m(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(w=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=K(a),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=U((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),r=new m(e)):r=new m(u.toString()),t=(c=m.precision)+3;;)if(o=r,r=o.plus(B(s,o,t+2,1)).times(.5),K(o.d).slice(0,t)===(e=K(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(g(o,c+1,0),o.times(o).eq(s))){r=o;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(g(r,c+1,1),n=!r.times(r).eq(s));break}return w=!0,g(r,c,m.rounding,n)};f.tangent=f.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=B(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,g(ce==2||ce==4?t.neg():t,n,e,!0)):new r(NaN)};f.times=f.mul=function(n){var e,t,r,i,o,s,a,c,u,m=this,l=m.constructor,d=m.d,p=(n=new l(n)).d;if(n.s*=m.s,!d||!d[0]||!p||!p[0])return new l(!n.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?n.s/0:n.s*0);for(t=U(m.e/h)+U(n.e/h),c=d.length,u=p.length,c<u&&(o=d,d=p,p=o,s=c,c=u,u=s),o=[],s=c+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)a=o[i]+p[r]*d[i-r-1]+e,o[i--]=a%re|0,e=a/re|0;o[i]=(o[i]+e)%re|0}for(;!o[--s];)o.pop();return e?++t:o.shift(),n.d=o,n.e=Ue(o,t),w?g(n,l.precision,l.rounding):n};f.toBinary=function(n,e){return st(this,2,n,e)};f.toDecimalPlaces=f.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(X(n,0,ge),e===void 0?e=r.rounding:X(e,0,8),g(t,n+t.e+1,e))};f.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=ie(r,!0):(X(n,0,ge),e===void 0?e=i.rounding:X(e,0,8),r=g(new i(r),n+1,e),t=ie(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};f.toFixed=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?t=ie(i):(X(n,0,ge),e===void 0?e=o.rounding:X(e,0,8),r=g(new o(i),n+i.e+1,e),t=ie(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};f.toFraction=function(n){var e,t,r,i,o,s,a,c,u,m,l,d,p=this,y=p.d,b=p.constructor;if(!y)return new b(p);if(u=t=new b(1),r=c=new b(0),e=new b(r),o=e.e=qt(y)-p.e-1,s=o%h,e.d[0]=_(10,s<0?h+s:s),n==null)n=o>0?e:u;else{if(a=new b(n),!a.isInt()||a.lt(u))throw Error(pe+a);n=a.gt(e)?o>0?e:u:a}for(w=!1,a=new b(K(y)),m=b.precision,b.precision=o=y.length*h*2;l=B(a,e,0,1,1),i=t.plus(l.times(r)),i.cmp(n)!=1;)t=r,r=i,i=u,u=c.plus(l.times(i)),c=i,i=e,e=a.minus(l.times(i)),a=i;return i=B(n.minus(t),r,0,1,1),c=c.plus(i.times(u)),t=t.plus(i.times(r)),c.s=u.s=p.s,d=B(u,r,o,1).minus(p).abs().cmp(B(c,t,o,1).minus(p).abs())<1?[u,r]:[c,t],b.precision=m,w=!0,d};f.toHexadecimal=f.toHex=function(n,e){return st(this,16,n,e)};f.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:X(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(w=!1,t=B(t,n,0,e,1).times(n),w=!0,g(t)):(n.s=t.s,t=n),t};f.toNumber=function(){return+this};f.toOctal=function(n,e){return st(this,8,n,e)};f.toPower=f.pow=function(n){var e,t,r,i,o,s,a=this,c=a.constructor,u=+(n=new c(n));if(!a.d||!n.d||!a.d[0]||!n.d[0])return new c(_(+a,u));if(a=new c(a),a.eq(1))return a;if(r=c.precision,o=c.rounding,n.eq(1))return g(a,r,o);if(e=U(n.e/h),e>=n.d.length-1&&(t=u<0?-u:u)<=In)return i=Gt(c,a,t,r),n.s<0?new c(1).div(i):g(i,r,o);if(s=a.s,s<0){if(e<n.d.length-1)return new c(NaN);if((n.d[e]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return t=_(+a,u),e=t==0||!isFinite(t)?U(u*(Math.log("0."+K(a.d))/Math.LN10+a.e+1)):new c(t+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(w=!1,c.rounding=a.s=1,t=Math.min(12,(e+"").length),i=it(n.times(fe(a,r+t)),r),i.d&&(i=g(i,r+5,1),Ne(i.d,r,o)&&(e=r+10,i=g(it(n.times(fe(a,e+t)),e),e+5,1),+K(i.d).slice(r+1,r+15)+1==1e14&&(i=g(i,r+1,0)))),i.s=s,w=!0,c.rounding=o,g(i,r,o))};f.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=ie(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(X(n,1,ge),e===void 0?e=i.rounding:X(e,0,8),r=g(new i(r),n,e),t=ie(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};f.toSignificantDigits=f.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(X(n,1,ge),e===void 0?e=r.rounding:X(e,0,8)),g(new r(t),n,e)};f.toString=function(){var n=this,e=n.constructor,t=ie(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};f.truncated=f.trunc=function(){return g(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var n=this,e=n.constructor,t=ie(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function K(n){var e,t,r,i=n.length-1,o="",s=n[0];if(i>0){for(o+=s,e=1;e<i;e++)r=n[e]+"",t=h-r.length,t&&(o+=de(t)),o+=r;s=n[e],r=s+"",t=h-r.length,t&&(o+=de(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function X(n,e,t){if(n!==~~n||n<e||n>t)throw Error(pe+n)}function Ne(n,e,t,r){var i,o,s,a;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=h,i=0):(i=Math.ceil((e+1)/h),e%=h),o=_(10,h-e),a=n[i]%o|0,r==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),s=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):s=(t<4&&a+1==o||t>3&&a+1==o/2)&&(n[i+1]/o/100|0)==_(10,e-2)-1||(a==o/2||a==0)&&(n[i+1]/o/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),s=(r||t<4)&&a==9999||!r&&t>3&&a==4999):s=((r||t<4)&&a+1==o||!r&&t>3&&a+1==o/2)&&(n[i+1]/o/1e3|0)==_(10,e-3)-1,s}function ve(n,e,t){for(var r,i=[0],o,s=0,a=n.length;s<a;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=tt.indexOf(n.charAt(s++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function Sn(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/We(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=ke(n,1,e.times(i),new n(1));for(var o=t;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return n.precision-=t,e}var B=function(){function n(r,i,o){var s,a=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+a,r[c]=s%o|0,a=s/o|0;return a&&r.unshift(a),r}function e(r,i,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function t(r,i,o,s){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,c){var u,m,l,d,p,y,b,v,C,$,P,G,Me,ae,Je,_e,Ie,$e,ee,Oe,De=r.constructor,et=r.s==i.s?1:-1,V=r.d,S=i.d;if(!V||!V[0]||!S||!S[0])return new De(!r.s||!i.s||(V?S&&V[0]==S[0]:!S)?NaN:V&&V[0]==0||!S?et*0:et/0);for(c?(p=1,m=r.e-i.e):(c=re,p=h,m=U(r.e/p)-U(i.e/p)),ee=S.length,Ie=V.length,C=new De(et),$=C.d=[],l=0;S[l]==(V[l]||0);l++);if(S[l]>(V[l]||0)&&m--,o==null?(ae=o=De.precision,s=De.rounding):a?ae=o+(r.e-i.e)+1:ae=o,ae<0)$.push(1),y=!0;else{if(ae=ae/p+2|0,l=0,ee==1){for(d=0,S=S[0],ae++;(l<Ie||d)&&ae--;l++)Je=d*c+(V[l]||0),$[l]=Je/S|0,d=Je%S|0;y=d||l<Ie}else{for(d=c/(S[0]+1)|0,d>1&&(S=n(S,d,c),V=n(V,d,c),ee=S.length,Ie=V.length),_e=ee,P=V.slice(0,ee),G=P.length;G<ee;)P[G++]=0;Oe=S.slice(),Oe.unshift(0),$e=S[0],S[1]>=c/2&&++$e;do d=0,u=e(S,P,ee,G),u<0?(Me=P[0],ee!=G&&(Me=Me*c+(P[1]||0)),d=Me/$e|0,d>1?(d>=c&&(d=c-1),b=n(S,d,c),v=b.length,G=P.length,u=e(b,P,v,G),u==1&&(d--,t(b,ee<v?Oe:S,v,c))):(d==0&&(u=d=1),b=S.slice()),v=b.length,v<G&&b.unshift(0),t(P,b,G,c),u==-1&&(G=P.length,u=e(S,P,ee,G),u<1&&(d++,t(P,ee<G?Oe:S,G,c))),G=P.length):u===0&&(d++,P=[0]),$[l++]=d,u&&P[0]?P[G++]=V[_e]||0:(P=[V[_e]],G=1);while((_e++<Ie||P[0]!==void 0)&&ae--);y=P[0]!==void 0}$[0]||$.shift()}if(p==1)C.e=m,_t=y;else{for(l=1,d=$[0];d>=10;d/=10)l++;C.e=l+m*p-1,g(C,a?o+C.e+1:o,s,y)}return C}}();function g(n,e,t,r){var i,o,s,a,c,u,m,l,d,p=n.constructor;e:if(e!=null){if(l=n.d,!l)return n;for(i=1,a=l[0];a>=10;a/=10)i++;if(o=e-i,o<0)o+=h,s=e,m=l[d=0],c=m/_(10,i-s-1)%10|0;else if(d=Math.ceil((o+1)/h),a=l.length,d>=a)if(r){for(;a++<=d;)l.push(0);m=c=0,i=1,o%=h,s=o-h+1}else break e;else{for(m=a=l[d],i=1;a>=10;a/=10)i++;o%=h,s=o-h+i,c=s<0?0:m/_(10,i-s-1)%10|0}if(r=r||e<0||l[d+1]!==void 0||(s<0?m:m%_(10,i-s-1)),u=t<4?(c||r)&&(t==0||t==(n.s<0?3:2)):c>5||c==5&&(t==4||r||t==6&&(o>0?s>0?m/_(10,i-s):0:l[d-1])%10&1||t==(n.s<0?8:7)),e<1||!l[0])return l.length=0,u?(e-=n.e+1,l[0]=_(10,(h-e%h)%h),n.e=-e||0):l[0]=n.e=0,n;if(o==0?(l.length=d,a=1,d--):(l.length=d+1,a=_(10,h-o),l[d]=s>0?(m/_(10,i-s)%_(10,s)|0)*a:0),u)for(;;)if(d==0){for(o=1,s=l[0];s>=10;s/=10)o++;for(s=l[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(n.e++,l[0]==re&&(l[0]=1));break}else{if(l[d]+=a,l[d]!=re)break;l[d--]=0,a=1}for(o=l.length;l[--o]===0;)l.pop()}return w&&(n.e>p.maxE?(n.d=null,n.e=NaN):n.e<p.minE&&(n.e=0,n.d=[0])),n}function ie(n,e,t){if(!n.isFinite())return Ut(n);var r,i=n.e,o=K(n.d),s=o.length;return e?(t&&(r=t-s)>0?o=o.charAt(0)+"."+o.slice(1)+de(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):i<0?(o="0."+de(-i-1)+o,t&&(r=t-s)>0&&(o+=de(r))):i>=s?(o+=de(i+1-s),t&&(r=t-i-1)>0&&(o=o+"."+de(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(o+="."),o+=de(r))),o}function Ue(n,e){var t=n[0];for(e*=h;t>=10;t/=10)e++;return e}function Ge(n,e,t){if(e>Nn)throw w=!0,t&&(n.precision=t),Error(Ot);return g(new n(Ke),e,1,!0)}function ne(n,e,t){if(e>rt)throw Error(Ot);return g(new n(qe),e,t,!0)}function qt(n){var e=n.length-1,t=e*h+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function de(n){for(var e="";n--;)e+="0";return e}function Gt(n,e,t,r){var i,o=new n(1),s=Math.ceil(r/h+4);for(w=!1;;){if(t%2&&(o=o.times(e),Ft(o.d,s)&&(i=!0)),t=U(t/2),t===0){t=o.d.length-1,i&&o.d[t]===0&&++o.d[t];break}e=e.times(e),Ft(e.d,s)}return w=!0,o}function Rt(n){return n.d[n.d.length-1]&1}function Vt(n,e,t){for(var r,i=new n(e[0]),o=0;++o<e.length;)if(r=new n(e[o]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function it(n,e){var t,r,i,o,s,a,c,u=0,m=0,l=0,d=n.constructor,p=d.rounding,y=d.precision;if(!n.d||!n.d[0]||n.e>17)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:0/0);for(e==null?(w=!1,c=y):c=e,a=new d(.03125);n.e>-2;)n=n.times(a),l+=5;for(r=Math.log(_(2,l))/Math.LN10*2+5|0,c+=r,t=o=s=new d(1),d.precision=c;;){if(o=g(o.times(n),c,1),t=t.times(++m),a=s.plus(B(o,t,c,1)),K(a.d).slice(0,c)===K(s.d).slice(0,c)){for(i=l;i--;)s=g(s.times(s),c,1);if(e==null)if(u<3&&Ne(s.d,c-r,p,u))d.precision=c+=10,t=o=a=new d(1),m=0,u++;else return g(s,d.precision=y,p,w=!0);else return d.precision=y,s}s=a}}function fe(n,e){var t,r,i,o,s,a,c,u,m,l,d,p=1,y=10,b=n,v=b.d,C=b.constructor,$=C.rounding,P=C.precision;if(b.s<0||!v||!v[0]||!b.e&&v[0]==1&&v.length==1)return new C(v&&!v[0]?-1/0:b.s!=1?NaN:v?0:b);if(e==null?(w=!1,m=P):m=e,C.precision=m+=y,t=K(v),r=t.charAt(0),Math.abs(o=b.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)b=b.times(n),t=K(b.d),r=t.charAt(0),p++;o=b.e,r>1?(b=new C("0."+t),o++):b=new C(r+"."+t.slice(1))}else return u=Ge(C,m+2,P).times(o+""),b=fe(new C(r+"."+t.slice(1)),m-y).plus(u),C.precision=P,e==null?g(b,P,$,w=!0):b;for(l=b,c=s=b=B(b.minus(1),b.plus(1),m,1),d=g(b.times(b),m,1),i=3;;){if(s=g(s.times(d),m,1),u=c.plus(B(s,new C(i),m,1)),K(u.d).slice(0,m)===K(c.d).slice(0,m))if(c=c.times(2),o!==0&&(c=c.plus(Ge(C,m+2,P).times(o+""))),c=B(c,new C(p),m,1),e==null)if(Ne(c.d,m-y,$,a))C.precision=m+=y,u=s=b=B(l.minus(1),l.plus(1),m,1),d=g(b.times(b),m,1),i=a=1;else return g(c,C.precision=P,$,w=!0);else return C.precision=P,c;c=u,i+=2}}function Ut(n){return String(n.s*n.s/0)}function ot(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%h,t<0&&(r+=h),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=h;r<i;)n.d.push(+e.slice(r,r+=h));e=e.slice(r),r=h-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),w&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Cn(n,e){var t,r,i,o,s,a,c,u,m;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Kt.test(e))return ot(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(Pn.test(e))t=16,e=e.toLowerCase();else if(kn.test(e))t=2;else if(Bn.test(e))t=8;else throw Error(pe+e);for(o=e.search(/p/i),o>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),s=o>=0,r=n.constructor,s&&(e=e.replace(".",""),a=e.length,o=a-o,i=Gt(r,new r(t),o,o*2)),u=ve(e,t,re),m=u.length-1,o=m;u[o]===0;--o)u.pop();return o<0?new r(n.s*0):(n.e=Ue(u,m),n.d=u,w=!1,s&&(n=B(n,i,a*4)),c&&(n=n.times(Math.abs(c)<54?_(2,c):Se.pow(2,c))),w=!0,n)}function En(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:ke(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/We(5,t)),e=ke(n,2,e,e);for(var i,o=new n(5),s=new n(16),a=new n(20);t--;)i=e.times(e),e=e.times(o.plus(i.times(s.times(i).minus(a))));return e}function ke(n,e,t,r,i){var o,s,a,c,u=1,m=n.precision,l=Math.ceil(m/h);for(w=!1,c=t.times(t),a=new n(r);;){if(s=B(a.times(c),new n(e++*e++),m,1),a=i?r.plus(s):r.minus(s),r=B(s.times(c),new n(e++*e++),m,1),s=a.plus(r),s.d[l]!==void 0){for(o=l;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=s,s=o,u++}return w=!0,s.d.length=l+1,s}function We(n,e){for(var t=n;--e;)t*=n;return t}function Wt(n,e){var t,r=e.s<0,i=ne(n,n.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return ce=r?4:1,e;if(t=e.divToInt(i),t.isZero())ce=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(o))return ce=Rt(t)?r?2:3:r?4:1,e;ce=Rt(t)?r?1:4:r?3:2}return e.minus(i).abs()}function st(n,e,t,r){var i,o,s,a,c,u,m,l,d,p=n.constructor,y=t!==void 0;if(y?(X(t,1,ge),r===void 0?r=p.rounding:X(r,0,8)):(t=p.precision,r=p.rounding),!n.isFinite())m=Ut(n);else{for(m=ie(n),s=m.indexOf("."),y?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,s>=0&&(m=m.replace(".",""),d=new p(1),d.e=m.length-s,d.d=ve(ie(d),10,i),d.e=d.d.length),l=ve(m,10,i),o=c=l.length;l[--c]==0;)l.pop();if(!l[0])m=y?"0p+0":"0";else{if(s<0?o--:(n=new p(n),n.d=l,n.e=o,n=B(n,d,t,r,0,i),l=n.d,o=n.e,u=_t),s=l[t],a=i/2,u=u||l[t+1]!==void 0,u=r<4?(s!==void 0||u)&&(r===0||r===(n.s<0?3:2)):s>a||s===a&&(r===4||u||r===6&&l[t-1]&1||r===(n.s<0?8:7)),l.length=t,u)for(;++l[--t]>i-1;)l[t]=0,t||(++o,l.unshift(1));for(c=l.length;!l[c-1];--c);for(s=0,m="";s<c;s++)m+=tt.charAt(l[s]);if(y){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)m+="0";for(l=ve(m,i,e),c=l.length;!l[c-1];--c);for(s=1,m="1.";s<c;s++)m+=tt.charAt(l[s])}else m=m.charAt(0)+"."+m.slice(1);m=m+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)m="0"+m;m="0."+m}else if(++o>c)for(o-=c;o--;)m+="0";else o<c&&(m=m.slice(0,o)+"."+m.slice(o))}m=(e==16?"0x":e==2?"0b":e==8?"0o":"")+m}return n.s<0?"-"+m:m}function Ft(n,e){if(n.length>e)return n.length=e,!0}function Ln(n){return new this(n).abs()}function Rn(n){return new this(n).acos()}function Fn(n){return new this(n).acosh()}function Mn(n,e){return new this(n).plus(e)}function _n(n){return new this(n).asin()}function On(n){return new this(n).asinh()}function Dn(n){return new this(n).atan()}function vn(n){return new this(n).atanh()}function Kn(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,o=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=ne(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?ne(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=ne(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(B(n,e,o,1)),e=ne(this,o,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(B(n,e,o,1)),t}function qn(n){return new this(n).cbrt()}function Gn(n){return g(n=new this(n),n.e+1,2)}function Vn(n,e,t){return new this(n).clamp(e,t)}function Un(n){if(!n||typeof n!="object")throw Error(Ve+"Object expected");var e,t,r,i=n.defaults===!0,o=["precision",1,ge,"rounding",0,8,"toExpNeg",-Ae,0,"toExpPos",0,Ae,"maxE",0,Ae,"minE",-Ae,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],i&&(this[t]=nt[t]),(r=n[t])!==void 0)if(U(r)===r&&r>=o[e+1]&&r<=o[e+2])this[t]=r;else throw Error(pe+t+": "+r);if(t="crypto",i&&(this[t]=nt[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(Dt);else this[t]=!1;else throw Error(pe+t+": "+r);return this}function Wn(n){return new this(n).cos()}function Xn(n){return new this(n).cosh()}function Xt(n){var e,t,r;function i(o){var s,a,c,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,Mt(o)){u.s=o.s,w?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;w?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return ot(u,o.toString())}else if(c!=="string")throw Error(pe+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),Kt.test(o)?ot(u,o):Cn(u,o)}if(i.prototype=f,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Un,i.clone=Xt,i.isDecimal=Mt,i.abs=Ln,i.acos=Rn,i.acosh=Fn,i.add=Mn,i.asin=_n,i.asinh=On,i.atan=Dn,i.atanh=vn,i.atan2=Kn,i.cbrt=qn,i.ceil=Gn,i.clamp=Vn,i.cos=Wn,i.cosh=Xn,i.div=zn,i.exp=Hn,i.floor=Zn,i.hypot=jn,i.ln=Yn,i.log=Qn,i.log10=$n,i.log2=Jn,i.max=er,i.min=tr,i.mod=nr,i.mul=rr,i.pow=ir,i.random=or,i.round=sr,i.sign=ar,i.sin=ur,i.sinh=cr,i.sqrt=mr,i.sub=lr,i.sum=dr,i.tan=fr,i.tanh=pr,i.trunc=gr,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function zn(n,e){return new this(n).div(e)}function Hn(n){return new this(n).exp()}function Zn(n){return g(n=new this(n),n.e+1,3)}function jn(){var n,e,t=new this(0);for(w=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return w=!0,new this(1/0);t=e}return w=!0,t.sqrt()}function Mt(n){return n instanceof Se||n&&n.toStringTag===vt||!1}function Yn(n){return new this(n).ln()}function Qn(n,e){return new this(n).log(e)}function Jn(n){return new this(n).log(2)}function $n(n){return new this(n).log(10)}function er(){return Vt(this,arguments,"lt")}function tr(){return Vt(this,arguments,"gt")}function nr(n,e){return new this(n).mod(e)}function rr(n,e){return new this(n).mul(e)}function ir(n,e){return new this(n).pow(e)}function or(n){var e,t,r,i,o=0,s=new this(1),a=[];if(n===void 0?n=this.precision:X(n,1,ge),r=Math.ceil(n/h),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);o<r;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(Dt);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],n%=h,r&&n&&(i=_(10,h-n),a[o]=(r/i|0)*i);a[o]===0;o--)a.pop();if(o<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=h)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<h&&(t-=h-r)}return s.e=t,s.d=a,s}function sr(n){return g(n=new this(n),n.e+1,this.rounding)}function ar(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function ur(n){return new this(n).sin()}function cr(n){return new this(n).sinh()}function mr(n){return new this(n).sqrt()}function lr(n,e){return new this(n).sub(e)}function dr(){var n=0,e=arguments,t=new this(e[n]);for(w=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return w=!0,g(t,this.precision,this.rounding)}function fr(n){return new this(n).tan()}function pr(n){return new this(n).tanh()}function gr(n){return g(n=new this(n),n.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var Se=f.constructor=Xt(nt);Ke=new Se(Ke);qe=new Se(qe);var W=Se;import{get as zt,set as hr}from"lodash";var at=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Ht={},br={};function j(n){let e=zt(Ht,n);if(!e){let t=zt(br,n);e=new at({name:n,logLevel:t}),hr(Ht,n,e)}return e}import{PublicKey as ps}from"@solana/web3.js";import hs from"bn.js";import Rr from"big.js";import Zo from"bn.js";import z from"bn.js";import{PublicKey as mt}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as wr}from"@solana/spl-token";import{PublicKey as L,SystemProgram as Zt,SYSVAR_RENT_PUBKEY as yr}from"@solana/web3.js";function ut({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var yi=[ut({pubkey:wr,isWritable:!1}),ut({pubkey:Zt.programId,isWritable:!1}),ut({pubkey:yr,isWritable:!1})];function jt({publicKey:n,transformSol:e}){let t=Yt(n.toString());if(t instanceof L)return e&&t.equals(Ce)?ct:t;if(e&&t.toString()===Ce.toBase58())return ct;if(typeof t=="string"){if(t===L.default.toBase58())return L.default;try{return new L(t)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Yt(n){try{return new L(n)}catch{return n}}var Ti=new L("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),xi=new L("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ai=new L("SysvarRent111111111111111111111111111111111"),ki=new L("SysvarC1ock11111111111111111111111111111111"),Tr=new L("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Pi=new L("Sysvar1nstructions1111111111111111111111111"),Bi=Zt.programId,Ii=new L("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ni=new L("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Si=new L("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ci=new L("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ei=new L("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Li=new L("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ri=new L("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Fi=new L("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Mi=new L("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),_i=new L("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Oi=new L("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ct=new L("So11111111111111111111111111111111111111112"),Ce=L.default;import{PublicKey as xr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Qt}from"@solana/spl-token";var Jt={chainId:101,address:xr.default.toBase58(),programId:Qt.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},ye={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Qt.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};var lt=class{constructor({mint:e,decimals:t,symbol:r,name:i,skipMint:o=!1,isToken2022:s=!1}){if(e===Ce.toBase58()||e instanceof mt&&Ce.equals(e)){this.decimals=ye.decimals,this.symbol=ye.symbol,this.name=ye.name,this.mint=new mt(ye.address),this.isToken2022=!1;return}this.decimals=t,this.symbol=r||e.toString().substring(0,6),this.name=i||e.toString().substring(0,6),this.mint=o?mt.default:jt({publicKey:e}),this.isToken2022=s}equals(e){return this===e?!0:this.mint.equals(e.mint)}},Te=lt;Te.WSOL=new lt(ue(te({},ye),{mint:ye.address}));import ze from"big.js";import Pr from"bn.js";import Br from"decimal.js-light";import Ar from"toformat";var kr=Ar,Ee=kr;var Xe=j("module/fraction"),dt=Ee(ze),Le=Ee(Br),Ir={[0]:Le.ROUND_DOWN,[1]:Le.ROUND_HALF_UP,[2]:Le.ROUND_UP},Nr={[0]:ze.roundDown,[1]:ze.roundHalfUp,[2]:ze.roundUp},E=class{constructor(e,t=new Pr(1)){this.numerator=he(e),this.denominator=he(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new E(this.denominator,this.numerator)}add(e){let t=e instanceof E?e:new E(he(e));return this.denominator.eq(t.denominator)?new E(this.numerator.add(t.numerator),this.denominator):new E(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof E?e:new E(he(e));return this.denominator.eq(t.denominator)?new E(this.numerator.sub(t.numerator),this.denominator):new E(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof E?e:new E(he(e));return new E(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof E?e:new E(he(e));return new E(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||Xe.logWithError(`${e} is not an integer.`),e<=0&&Xe.logWithError(`${e} is not positive.`),Le.set({precision:e+1,rounding:Ir[r]});let i=new Le(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||Xe.logWithError(`${e} is not an integer.`),e<0&&Xe.logWithError(`${e} is negative.`),dt.DP=e,dt.RM=Nr[r]||1,new dt(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var uo=j("Raydium_price");var ft=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},He=ft;He.SOL=new ft(Jt);import Cr from"bn.js";var bo=new E(new Cr(100));var Er=new z(0),Oo=new z(1),Do=new z(2),vo=new z(3),Ko=new z(5),Lr=new z(10),qo=new z(100),Go=new z(1e3),Vo=new z(1e4),$t=9007199254740991;function he(n){let e=j("Raydium_parseBigNumberish");if(n instanceof z)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new z(n);e.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&e.logWithError(`BigNumberish number underflow: ${n}`),(n>=$t||n<=-$t)&&e.logWithError(`BigNumberish number overflow: ${n}`),new z(String(n))):typeof n=="bigint"?new z(n.toString()):(e.error(`invalid BigNumberish value: ${n}`),new z(0))}var ns=j("Raydium_amount"),rs=Ee(Rr);import{PublicKey as la,sendAndConfirmTransaction as da,Transaction as pa,TransactionMessage as ha,VersionedTransaction as ba}from"@solana/web3.js";import Ta from"axios";import{PublicKey as Fr,ComputeBudgetProgram as Ps,Transaction as Is,TransactionMessage as Ss,Keypair as Cs,VersionedTransaction as Ls}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ms}from"@solana/spl-token";var Ds=j("Raydium_txUtil");function bt(n,e){let[t,r]=Fr.findProgramAddressSync(n,e);return{publicKey:t,nonce:r}}import{PublicKey as Or,AddressLookupTableAccount as en}from"@solana/web3.js";import{PublicKey as _r}from"@solana/web3.js";import{MINT_SIZE as Ws,TOKEN_PROGRAM_ID as Xs,getTransferFeeConfig as zs,unpackMint as Hs}from"@solana/spl-token";var wt=j("Raydium_accountInfo_util");async function Ze(n,e,t){let{batchRequest:r,commitment:i="confirmed",chunkCount:o=100}=te({batchRequest:!1},t),s=yt(e,o),a=new Array(s.length).fill([]);if(r){let c=s.map(l=>{let d=n._buildArgs([l.map(p=>p.toBase58())],i,"base64");return{methodName:"getMultipleAccounts",args:d}}),u=yt(c,10);a=(await(await Promise.all(u.map(async l=>await n._rpcBatchRequest(l)))).flat()).map(l=>(l.error&&wt.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${l.error.message}`),l.result.value.map(d=>{if(d){let{data:p,executable:y,lamports:b,owner:v,rentEpoch:C}=d;return p.length!==2&&p[1]!=="base64"&&wt.logWithError("info must be base64 encoded, RPC_ERROR"),{data:Buffer.from(p[0],"base64"),executable:y,lamports:b,owner:new _r(v),rentEpoch:C}}return null})))}else try{a=await Promise.all(s.map(c=>n.getMultipleAccountsInfo(c,i)))}catch(c){c instanceof Error&&wt.logWithError(`failed to get info for multiple accounts, RPC_ERROR, ${c.message}`)}return a.flat()}var Dr={"2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17":new en({key:new Or("2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17"),state:en.deserialize(Buffer.from("AQAAAP//////////d49+DAAAAAAAAQZMWvw7GUNJdaccNBVnb57OKakxL2BHLYvhRwVILRsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGRm/lIRcy/+ytunLDm+e8jOW7xfcSayxDmzpAAAAABt324ddloZPZy+FGzut5rBy0he1fWzeROoz1hX7/AKkG3fbh7nWP3hhCXbzkbM3athr8TYO5DSf+vfko2KGL/AVKU1D4XciC1hSlVnJ4iilt3x6rq9CmBniISTL07vagBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvDQdRqCgtphMF/imcN7mY5YRx2xE1A3MQ+L4QRaYK9u4GRfZP3LsAd00a+IkCpA22UNQMKdq5BFbJuwuOLqc8zxCTDlqxBG8J0HcxtfogQHDK06ukzfaXiNDKAob1MqBHS9lJxDYCwz8gd5DtFqNSTKG5l1zxIaKpDP/sffi2is1H9aKveyXSu5StXElYRl9SD5As0DHE4N0GLnf84/siiKXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu9N9LMnrw/JNO0hqMVB4rk/2ou4AB1loQ7FZoPwut2o4KZB+0p9xnbrQKw038qjpHar+PyDwvxBRcu5hpHw3dguezeWv+IwvgW5icu8EGkhGa9AkFPPJT7VMSFb8xowveU=","base64"))})};function yt(n,e=1,t=[]){let r=[...n];if(e<=0)return t;for(;r.length;)t.push(r.splice(0,e));return t}import{PublicKey as A}from"@solana/web3.js";var Ea=new A("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),La=new A("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ra=new A("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Fa=new A("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Ma=new A("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),_a=new A("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Oa=new A("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Da=new A("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),va=new A("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ka=new A("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),qa=new A("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Ga=new A("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Va=new A("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Ua=new A("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Wa=new A("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Xa=new A("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),za=new A("8yQvrjQuritLntxz6pAaWcEX6CsRMeDmr7baCLnNwEuw"),Ha=new A("E1oP2yNZXw3dFnUoPygWZPg9u2Gad87VFVPeYWqa6rD6"),Za=new A("E1oP2yNZXw3dFnUoPygWZPg9u2Gad87VFVPeYWqa6rD6"),vr=new A("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),Kr=new A("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),qr=new A("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2");var ja={SERUM_MARKET:A.default,OPENBOOK_MARKET:new A("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:A.default,FarmV3:new A("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new A("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new A("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new A("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new A("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new A("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),Router:new A("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:vr,CREATE_CPMM_POOL_AUTH:Kr,CREATE_CPMM_POOL_FEE_ACC:qr,FEE_DESTINATION_ID:new A("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR")};import{PublicKey as Ja}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as tu}from"@solana/spl-token";import iu from"bn.js";function tn(n){let e=new ArrayBuffer(4);return new DataView(e).setInt32(0,n,!1),new Uint8Array(e)}var Nu=Buffer.from("amm_config","utf8"),Su=Buffer.from("pool","utf8"),Cu=Buffer.from("pool_vault","utf8"),Eu=Buffer.from("pool_reward_vault","utf8"),Lu=Buffer.from("position","utf8"),Gr=Buffer.from("tick_array","utf8"),Ru=Buffer.from("operation","utf8"),Fu=Buffer.from("pool_tick_array_bitmap_extension","utf8");function me(n,e,t){return bt([Gr,e.toBuffer(),tn(t)],n)}import{PublicKey as Yr}from"@solana/web3.js";import sn,{isBN as an}from"bn.js";import{bits as Ou,BitStructure as Du,blob as Vr,Blob as vu,cstr as Ku,f32 as qu,f32be as Gu,f64 as Vu,f64be as Uu,greedy as Wu,Layout as Ur,ns64 as Xu,ns64be as zu,nu64 as Hu,nu64be as Zu,offset as ju,s16 as Yu,s16be as Qu,s24 as Ju,s24be as $u,s32 as Wr,s32be as ec,s40 as tc,s40be as nc,s48 as rc,s48be as ic,s8 as oc,seq as Xr,struct as sc,Structure as zr,u16 as Hr,u16be as ac,u24 as uc,u24be as cc,u32 as mc,u32be as lc,u40 as dc,u40be as fc,u48 as pc,u48be as gc,u8 as Zr,UInt as jr,union as hc,Union as bc,unionLayoutDiscriminator as wc,utf8 as yc}from"@solana/buffer-layout";var Tt=Ur,nn=zr;var xt=jr;var rn=Zr,Pe=Hr;var be=Wr;var on=Xr;var Y=Vr;var Re=class extends Tt{constructor(t,r,i){super(t,i);this.blob=Y(t),this.signed=r}decode(t,r=0){let i=new sn(this.blob.decode(t,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,r,i=0){return typeof t=="number"&&(t=new sn(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,i)}};function Q(n){return new xt(1,n)}function Fe(n){return new xt(4,n)}function I(n){return new Re(8,!1,n)}function N(n){return new Re(16,!1,n)}function un(n){return new Re(16,!0,n)}var je=class extends Tt{constructor(t,r,i,o){super(t.span,o);this.layout=t,this.decoder=r,this.encoder=i}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,i){return this.layout.encode(this.encoder(t),r,i)}getSpan(t,r){return this.layout.getSpan(t,r)}};function O(n){return new je(Y(32),e=>new Yr(e),e=>e.toBuffer(),n)}function cn(n){return new je(rn(),Qr,Jr,n)}function Qr(n){if(n===0)return!1;if(n===1)return!0;throw new Error("Invalid bool: "+n)}function Jr(n){return n?1:0}var At=class extends nn{decode(e,t){return super.decode(e,t)}};function H(n,e,t){return new At(n,e,t)}function F(n,e,t){let r,i=typeof e=="number"?e:an(e)?e.toNumber():new Proxy(e,{get(o,s){if(!r){let a=Reflect.get(o,"count");r=an(a)?a.toNumber():a,Reflect.set(o,"count",r)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(r=a),Reflect.set(o,s,a)}});return on(n,i,t)}import J from"bn.js";var oe=new J(0),Be=new J(1),mn=new J(-1),Ye=new J(1).shln(64),Qe=new J(1).shln(128),$r=Ye.sub(Be),kt=64,ln=Qe.subn(1),le=-443636,we=-le,Pt=new J("4295048016"),Bt=new J("79226673521066979257578248091"),Fc=new J("4295048017"),Mc=new J("79226673521066979257578248090"),dn=16,fn="59543866431248",pn="184467440737095516",gn="15793534762490258745",ei=new J(10).pow(new J(6));var _c=new J("18446744073700000000");var It=14;var Yc=H([Y(8),Q("bump"),Pe("index"),O(""),Fe("protocolFeeRate"),Fe("tradeFeeRate"),Pe("tickSpacing"),F(I(),8,"")]),ti=H([Fe("blockTimestamp"),N("sqrtPriceX64"),N("cumulativeTimePriceX64"),F(N(),1,"")]),Qc=H([Y(8),cn("initialized"),O("poolId"),F(ti,1e3,"observations"),F(N(),5,"")]),ni=H([Q("rewardState"),I("openTime"),I("endTime"),I("lastUpdateTime"),N("emissionsPerSecondX64"),I("rewardTotalEmissioned"),I("rewardClaimed"),O("tokenMint"),O("tokenVault"),O("creator"),N("rewardGrowthGlobalX64")]),ri=H([Y(8),Q("bump"),O("ammConfig"),O("creator"),O("mintA"),O("mintB"),O("vaultA"),O("vaultB"),O("observationId"),Q("mintDecimalsA"),Q("mintDecimalsB"),Pe("tickSpacing"),N("liquidity"),N("sqrtPriceX64"),be("tickCurrent"),Pe("observationIndex"),Pe("observationUpdateDuration"),N("feeGrowthGlobalX64A"),N("feeGrowthGlobalX64B"),I("protocolFeesTokenA"),I("protocolFeesTokenB"),N("swapInAmountTokenA"),N("swapOutAmountTokenB"),N("swapInAmountTokenB"),N("swapOutAmountTokenA"),Q("status"),F(Q(),7,""),F(ni,3,"rewardInfos"),F(I(),16,"tickArrayBitmap"),I("totalFeesTokenA"),I("totalFeesClaimedTokenA"),I("totalFeesTokenB"),I("totalFeesClaimedTokenB"),I("fundFeesTokenA"),I("fundFeesTokenB"),I("startTime"),F(I(),15*4-3,"padding")]),ii=H([N("growthInsideLastX64"),I("rewardAmountOwed")]),oi=H([Y(8),Q("bump"),O("nftMint"),O("poolId"),be("tickLower"),be("tickUpper"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),I("tokenFeesOwedA"),I("tokenFeesOwedB"),F(ii,3,"rewardInfos"),F(I(),8,"")]),Jc=H([Y(8),Q("bump"),O("poolId"),be("tickLowerIndex"),be("tickUpperIndex"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),I("tokenFeesOwedA"),I("tokenFeesOwedB"),F(N(),3,"rewardGrowthInside"),F(I(),8,"")]),si=H([be("tick"),un("liquidityNet"),N("liquidityGross"),N("feeGrowthOutsideX64A"),N("feeGrowthOutsideX64B"),F(N(),3,"rewardGrowthsOutsideX64"),F(Fe(),13,"")]),St=H([Y(8),O("poolId"),be("startTickIndex"),F(si,q,"ticks"),Q("initializedTickCount"),F(Q(),115,"")]),$c=H([Y(329),F(O(),100,"whitelistMints")]),ai=H([Y(8),O("poolId"),F(F(I(),8),It,"positiveTickArrayBitmap"),F(F(I(),8),It,"negativeTickArrayBitmap")]);var ui=15,Z=class{static async getTickArrays(e,t,r,i,o,s,a){let c=[],u=R.getTickArrayStartIndexByTick(i,o),m=R.getInitializedTickArrayInRange(s,a,o,u,Math.floor(ui/2));for(let p=0;p<m.length;p++){let{publicKey:y}=me(t,r,m[p]);c.push(y)}let l=(await Ze(e,c)).map(p=>p!==null?St.decode(p.data):null),d={};for(let p=0;p<c.length;p++){let y=l[p];y!==null&&(d[y.startTickIndex]=ue(te({},y),{address:c[p]}))}return d}static nextInitializedTick(e,t,r,i,o,s){let{initializedTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}=this.nextInitializedTickInOneArray(e,t,r,i,o,s);for(;a==null||a.liquidityGross.lten(0);){if(u=R.getNextTickArrayStartIndex(u,o,s),this.checkIsValidStartIndex(u,o))throw new Error("No enough initialized tickArray");let m=r[u];if(m===void 0)continue;let{nextTick:l,tickArrayAddress:d,tickArrayStartTickIndex:p}=this.firstInitializedTickInOneArray(e,t,m,s);[a,c,u]=[l,d,p]}if(a==null)throw new Error("No invaild tickArray cache");return{nextTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}}static nextInitializedTickArray(e,t,r,i,o){let s=Math.floor(e/Z.tickCount(t)),a=r?R.searchLowBitFromStart(i,o,s-1,1,t):R.searchHightBitFromStart(i,o,s+1,1,t);return a.length>0?{isExist:!0,nextStartIndex:a[0]}:{isExist:!1,nextStartIndex:0}}static firstInitializedTickInOneArray(e,t,r,i){let o;if(i){let a=q-1;for(;a>=0;){let c=r.ticks[a];if(c.liquidityGross.gtn(0)){o=c;break}a=a-1}}else{let a=0;for(;a<q;){let c=r.ticks[a];if(c.liquidityGross.gtn(0)){o=c;break}a=a+1}}let{publicKey:s}=me(e,t,r.startTickIndex);return{nextTick:o,tickArrayAddress:s,tickArrayStartTickIndex:r.startTickIndex}}static nextInitializedTickInOneArray(e,t,r,i,o,s){let a=R.getTickArrayStartIndexByTick(i,o),c=Math.floor((i-a)/o),u=r[a];if(u==null)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:a};let m;if(s)for(;c>=0;){let d=u.ticks[c];if(d.liquidityGross.gtn(0)){m=d;break}c=c-1}else for(c=c+1;c<q;){let d=u.ticks[c];if(d.liquidityGross.gtn(0)){m=d;break}c=c+1}let{publicKey:l}=me(e,t,a);return{initializedTick:m,tickArrayAddress:l,tickArrayStartTickIndex:u.startTickIndex}}static getArrayStartIndex(e,t){let r=this.tickCount(t);return Math.floor(e/r)*r}static checkIsValidStartIndex(e,t){if(R.checkIsOutOfBoundary(e)){if(e>we)return!1;let r=R.getTickArrayStartIndexByTick(le,t);return e==r}return e%this.tickCount(t)==0}static tickCount(e){return q*e}};import k from"bn.js";import{PublicKey as km}from"@solana/web3.js";import Nm from"bn.js";import mm from"bn.js";import{TOKEN_2022_PROGRAM_ID as Vm}from"@solana/spl-token";var se=class{static mulDivRoundingUp(e,t,r){let i=e.mul(t),o=i.div(r);return i.mod(r).eq(oe)||(o=o.add(Be)),o}static mulDivFloor(e,t,r){if(r.eq(oe))throw new Error("division by 0");return e.mul(t).div(r)}static mulDivCeil(e,t,r){if(r.eq(oe))throw new Error("division by 0");return e.mul(t).add(r.sub(Be)).div(r)}static x64ToDecimal(e,t){return new W(e.toString()).div(W.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new k(e.mul(W.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(Qe).sub(t).mod(Qe)}};function D(n,e){return Ct(n.mul(e),64,256)}function mi(n,e,t){let r=n.toTwos(t).shln(e);return r.imaskn(t+1),r.fromTwos(t)}function Ct(n,e,t){let r=n.toTwos(t).shrn(e);return r.imaskn(t-e+1),r.fromTwos(t-e)}var M=class{static sqrtPriceX64ToPrice(e,t,r){return se.x64ToDecimal(e).pow(2).mul(W.pow(10,t-r))}static priceToSqrtPriceX64(e,t,r){return se.decimalToX64(e.mul(W.pow(10,r-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,r,i){if(!e.gt(oe))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(oe))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,r,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,r,!0)}static getNextSqrtPriceX64FromOutput(e,t,r,i){if(!e.gt(oe))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(oe))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,r,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,r,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,r,i){if(r.eq(oe))return e;let o=t.shln(kt);if(i){let s=o,a=o.add(r.mul(e));return a.gte(s)?se.mulDivCeil(s,e,a):se.mulDivRoundingUp(s,Be,s.div(e).add(r))}else{let s=r.mul(e);if(!o.gt(s))throw new Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let a=o.sub(s);return se.mulDivCeil(o,e,a)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,r,i){let o=r.shln(kt);if(i)return e.add(o.div(t));{let s=se.mulDivRoundingUp(o,Be,t);if(!e.gt(s))throw new Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(s)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw new Error("tick must be integer");if(e<le||e>we)throw new Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?e*-1:e,r=(t&1)!=0?new k("18445821805675395072"):new k("18446744073709551616");return(t&2)!=0&&(r=D(r,new k("18444899583751176192"))),(t&4)!=0&&(r=D(r,new k("18443055278223355904"))),(t&8)!=0&&(r=D(r,new k("18439367220385607680"))),(t&16)!=0&&(r=D(r,new k("18431993317065453568"))),(t&32)!=0&&(r=D(r,new k("18417254355718170624"))),(t&64)!=0&&(r=D(r,new k("18387811781193609216"))),(t&128)!=0&&(r=D(r,new k("18329067761203558400"))),(t&256)!=0&&(r=D(r,new k("18212142134806163456"))),(t&512)!=0&&(r=D(r,new k("17980523815641700352"))),(t&1024)!=0&&(r=D(r,new k("17526086738831433728"))),(t&2048)!=0&&(r=D(r,new k("16651378430235570176"))),(t&4096)!=0&&(r=D(r,new k("15030750278694412288"))),(t&8192)!=0&&(r=D(r,new k("12247334978884435968"))),(t&16384)!=0&&(r=D(r,new k("8131365268886854656"))),(t&32768)!=0&&(r=D(r,new k("3584323654725218816"))),(t&65536)!=0&&(r=D(r,new k("696457651848324352"))),(t&131072)!=0&&(r=D(r,new k("26294789957507116"))),(t&262144)!=0&&(r=D(r,new k("37481735321082"))),e>0&&(r=ln.div(r)),r}static getTickFromPrice(e,t,r){return M.getTickFromSqrtPriceX64(M.priceToSqrtPriceX64(e,t,r))}static getTickFromSqrtPriceX64(e){if(e.gt(Bt)||e.lt(Pt))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,r=new k(t-64),i=mi(r,32,128),o=new k("8000000000000000","hex"),s=0,a=new k(0),c=t>=64?e.shrn(t-63):e.shln(63-t);for(;o.gt(new k(0))&&s<dn;){c=c.mul(c);let y=c.shrn(127);c=c.shrn(63+y.toNumber()),a=a.add(o.mul(y)),o=o.shrn(1),s+=1}let u=a.shrn(32),l=i.add(u).mul(new k(fn)),d=Ct(l.sub(new k(pn)),64,128).toNumber(),p=Ct(l.add(new k(gn)),64,128).toNumber();return d==p?d:M.getSqrtPriceX64FromTick(p).lte(e)?p:d}},xe=class{static getTickWithPriceAndTickspacing(e,t,r,i){let s=M.getTickFromSqrtPriceX64(M.priceToSqrtPriceX64(e,r,i))/t;return s<0?s=Math.floor(s):s=Math.ceil(s),s*t}static roundPriceWithTickspacing(e,t,r,i){let o=xe.getTickWithPriceAndTickspacing(e,t,r,i),s=M.getSqrtPriceX64FromTick(o);return M.sqrtPriceX64ToPrice(s,r,i)}};var q=60,Nt=512,R=class{static getTickArrayAddressByTick(e,t,r,i){let o=R.getTickArrayStartIndexByTick(r,i),{publicKey:s}=me(e,t,o);return s}static getTickOffsetInArray(e,t){if(e%t!=0)throw new Error("tickIndex % tickSpacing not equal 0");let r=R.getTickArrayStartIndexByTick(e,t),i=Math.floor((e-r)/t);if(i<0||i>=q)throw new Error("tick offset in array overflow");return i}static getTickArrayBitIndex(e,t){let r=Z.tickCount(t),i=e/r;return e<0&&e%r!=0?i=Math.ceil(i)-1:i=Math.floor(i),i}static getTickArrayStartIndexByTick(e,t){return this.getTickArrayBitIndex(e,t)*Z.tickCount(t)}static getTickArrayOffsetInBitmapByTick(e,t){let r=t*q,i=Math.floor(e/r)+512;return Math.abs(i)}static checkTickArrayIsInitialized(e,t,r){let i=r*q,o=Math.floor(t/i)+512,s=Math.abs(o);return{isInitialized:e.testn(s),startIndex:(s-512)*i}}static getNextTickArrayStartIndex(e,t,r){return r?e-t*q:e+t*q}static mergeTickArrayBitmap(e){let t=new li(0);for(let r=0;r<e.length;r++)t=t.add(e[r].shln(64*r));return t}static getInitializedTickArrayInRange(e,t,r,i,o){let s=Math.floor(i/(r*q));return[...R.searchLowBitFromStart(e,t,s-1,o,r),...R.searchHightBitFromStart(e,t,s,o,r)]}static getAllInitializedTickArrayStartIndex(e,t,r){return R.searchHightBitFromStart(e,t,0,Nt,r)}static getAllInitializedTickArrayInfo(e,t,r,i,o){let s=[],a=R.getAllInitializedTickArrayStartIndex(r,i,o);for(let c of a){let{publicKey:u}=me(e,t,c);s.push({tickArrayStartIndex:c,tickArrayAddress:u})}return s}static getAllInitializedTickInTickArray(e){return e.ticks.filter(t=>t.liquidityGross.gtn(0))}static searchLowBitFromStart(e,t,r,i,o){let s=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(u=>R.mergeTickArrayBitmap(u)),a=[];for(;r>=-7680;){let u=Math.floor((r+7680)/512),m=(r+7680)%512;if(s[u].testn(m)&&a.push(r),r--,a.length===i)break}let c=Z.tickCount(o);return a.map(u=>u*c)}static searchHightBitFromStart(e,t,r,i,o){let s=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(u=>R.mergeTickArrayBitmap(u)),a=[];for(;r<7680;){let u=Math.floor((r+7680)/512),m=(r+7680)%512;if(s[u].testn(m)&&a.push(r),r++,a.length===i)break}let c=Z.tickCount(o);return a.map(u=>u*c)}static checkIsOutOfBoundary(e){return e<le||e>we}static nextInitTick(e,t,r,i,o){if(Z.getArrayStartIndex(t,r)!=e.startTickIndex)return null;let a=Math.floor((t-e.startTickIndex)/r);if(i)for(;a>=0;){if(e.ticks[a].liquidityGross.gtn(0))return e.ticks[a];a=a-1}else for(o||(a=a+1);a<q;){if(e.ticks[a].liquidityGross.gtn(0))return e.ticks[a];a=a+1}return null}static firstInitializedTick(e,t){if(t){let r=q-1;for(;r>=0;){if(e.ticks[r].liquidityGross.gtn(0))return e.ticks[r];r=r-1}}else{let r=0;for(;r<q;){if(e.ticks[r].liquidityGross.gtn(0))return e.ticks[r];r=r+1}}throw Error(`firstInitializedTick check error: ${e} - ${t}`)}static _getTickPriceLegacy({poolInfo:e,tick:t,baseIn:r}){let i=M.getSqrtPriceX64FromTick(t),o=M.sqrtPriceX64ToPrice(i,e.mintA.decimals,e.mintB.decimals);return r?{tick:t,price:o,tickSqrtPriceX64:i}:{tick:t,price:new W(1).div(o),tickSqrtPriceX64:i}}static _getPriceAndTickLegacy({poolInfo:e,price:t,baseIn:r}){let i=r?t:new W(1).div(t),o=xe.getTickWithPriceAndTickspacing(i,e.ammConfig.tickSpacing,e.mintA.decimals,e.mintB.decimals),s=M.getSqrtPriceX64FromTick(o),a=M.sqrtPriceX64ToPrice(s,e.mintA.decimals,e.mintB.decimals);return r?{tick:o,price:a}:{tick:o,price:new W(1).div(a)}}static getTickPrice({poolInfo:e,tick:t,baseIn:r}){let i=M.getSqrtPriceX64FromTick(t),o=M.sqrtPriceX64ToPrice(i,e.mintA.decimals,e.mintB.decimals);return r?{tick:t,price:o,tickSqrtPriceX64:i}:{tick:t,price:new W(1).div(o),tickSqrtPriceX64:i}}static getPriceAndTick({poolInfo:e,price:t,baseIn:r}){let i=r?t:new W(1).div(t),o=xe.getTickWithPriceAndTickspacing(i,e.config.tickSpacing,e.mintA.decimals,e.mintB.decimals),s=M.getSqrtPriceX64FromTick(o),a=M.sqrtPriceX64ToPrice(s,e.mintA.decimals,e.mintB.decimals);return r?{tick:o,price:a}:{tick:o,price:new W(1).div(a)}}};export{Nt as TICK_ARRAY_BITMAP_SIZE,q as TICK_ARRAY_SIZE,R as TickUtils};
//# sourceMappingURL=tick.mjs.map