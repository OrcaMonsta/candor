import u from"bn.js";import l from"bn.js";var A=new l(1e6);function B(r,t){if(t.isZero())throw Error("divisor is zero");return r.mod(t)}function f(r,t){if(t.isZero())throw Error("rhs is zero");let e=r.div(t);if(e.isZero())throw Error("quotient is zero");let o=B(r,t);return o.gt(s)&&(e=e.add(new u(1)),t=r.div(e),o=B(r,e),o.gt(s)&&(t=t.add(new u(1)))),[e,t]}var s=new u(0),p=class{static swapWithoutFees(t,e,o){let a=e.mul(o),N=e.add(t),[n,i]=f(a,N),m=i.sub(e),d=o.sub(n);if(d.isZero())throw Error("destinationAmountSwapped is zero");return{sourceAmountSwapped:m,destinationAmountSwapped:d}}static lpTokensToTradingTokens(t,e,o,a,N){let n=t.mul(o).div(e),i=t.mul(a).div(e);if(N===0)return{tokenAmount0:n,tokenAmount1:i};if(N===1)return B(t.mul(o),e).gt(s)&&n.gt(s)&&(n=n.add(new u(1))),B(t.mul(a),e).gt(s)&&i.gt(s)&&(i=i.add(new u(1))),{tokenAmount0:n,tokenAmount1:i};throw Error("roundDirection value error")}};export{p as ConstantProductCurve};
//# sourceMappingURL=constantProduct.mjs.map